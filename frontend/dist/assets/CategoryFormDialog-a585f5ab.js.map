{"version":3,"file":"CategoryFormDialog-a585f5ab.js","sources":["../../src/components/categories/CategoryFormDialog.vue"],"sourcesContent":["<template>\n  <v-dialog v-model=\"dialogModel\" max-width=\"600\" persistent>\n    <v-card>\n      <v-card-title class=\"text-h5\">\n        {{ isEdit ? `Edit Category: ${originalCategory?.name}` : 'Create New Category' }}\n      </v-card-title>\n      \n      <v-card-text>\n        <v-form ref=\"form\" @submit.prevent=\"save\" v-model=\"formValid\">\n          <v-row>\n            <v-col cols=\"12\">\n              <v-text-field\n                v-model=\"formData.name\"\n                label=\"Category Name\"\n                :rules=\"nameRules\"\n                required\n                variant=\"outlined\"\n                autofocus\n              ></v-text-field>\n            </v-col>\n            \n            <v-col cols=\"12\">\n              <v-textarea\n                v-model=\"formData.description\"\n                label=\"Description\"\n                variant=\"outlined\"\n                rows=\"4\"\n                placeholder=\"Provide a description for this category (optional)\"\n              ></v-textarea>\n            </v-col>\n          </v-row>\n        </v-form>\n      </v-card-text>\n      \n      <v-card-actions>\n        <v-spacer></v-spacer>\n        <v-btn\n          color=\"grey-darken-1\"\n          variant=\"text\"\n          @click=\"close\"\n        >\n          Cancel\n        </v-btn>\n        <v-btn\n          color=\"primary\"\n          variant=\"flat\"\n          @click=\"save\"\n          :disabled=\"!formValid || !formData.name\"\n          :loading=\"saving\"\n        >\n          {{ isEdit ? 'Update' : 'Create' }}\n        </v-btn>\n      </v-card-actions>\n    </v-card>\n  </v-dialog>\n</template>\n\n<script setup>\nimport { ref, computed, watch } from 'vue'\n\n// Props\nconst props = defineProps({\n  modelValue: {\n    type: Boolean,\n    default: false\n  },\n  category: {\n    type: Object,\n    default: null\n  },\n  isEdit: {\n    type: Boolean,\n    default: false\n  }\n})\n\n// Emits\nconst emit = defineEmits(['update:modelValue', 'save'])\n\n// Data\nconst form = ref(null)\nconst formValid = ref(false)\nconst saving = ref(false)\nconst formData = ref({\n  name: '',\n  description: ''\n})\nconst originalCategory = ref(null)\n\n// Computed\nconst dialogModel = computed({\n  get: () => props.modelValue,\n  set: (value) => emit('update:modelValue', value)\n})\n\n// Validation rules\nconst nameRules = [\n  v => !!v || 'Category name is required',\n  v => (v && v.length >= 2) || 'Category name must be at least 2 characters',\n  v => (v && v.length <= 50) || 'Category name must be less than 50 characters'\n]\n\n// Methods\nfunction close() {\n  dialogModel.value = false\n}\n\nasync function save() {\n  if (!formValid.value) return\n  \n  saving.value = true\n  try {\n    // Prepare the data to emit\n    const categoryData = {\n      name: formData.value.name,\n      description: formData.value.description || ''\n    }\n    \n    // Emit save event with the form data\n    emit('save', categoryData)\n  } catch (error) {\n    console.error('Error saving category:', error)\n  } finally {\n    saving.value = false\n  }\n}\n\n// Reset form when dialog opens/closes\nwatch(() => props.modelValue, (isOpen) => {\n  if (isOpen && props.category) {\n    // Clone the category to avoid modifying the original\n    originalCategory.value = { ...props.category }\n    \n    // Set form values\n    formData.value = {\n      name: props.category.name || '',\n      description: props.category.description || ''\n    }\n  } else {\n    // Reset form when dialog closes\n    if (form.value) {\n      form.value.reset()\n    }\n    formData.value = {\n      name: '',\n      description: ''\n    }\n    originalCategory.value = null\n  }\n})\n</script>\n"],"names":["props","__props","emit","__emit","form","ref","formValid","saving","formData","originalCategory","dialogModel","computed","value","nameRules","v","close","save","categoryData","error","watch","isOpen"],"mappings":"iUA6DA,MAAMA,EAAQC,EAgBRC,EAAOC,EAGPC,EAAOC,EAAI,IAAI,EACfC,EAAYD,EAAI,EAAK,EACrBE,EAASF,EAAI,EAAK,EAClBG,EAAWH,EAAI,CACnB,KAAM,GACN,YAAa,EACf,CAAC,EACKI,EAAmBJ,EAAI,IAAI,EAG3BK,EAAcC,EAAS,CAC3B,IAAK,IAAMX,EAAM,WACjB,IAAMY,GAAUV,EAAK,oBAAqBU,CAAK,CACjD,CAAC,EAGKC,EAAY,CAChBC,GAAK,CAAC,CAACA,GAAK,4BACZA,GAAMA,GAAKA,EAAE,QAAU,GAAM,8CAC7BA,GAAMA,GAAKA,EAAE,QAAU,IAAO,+CAChC,EAGA,SAASC,GAAQ,CACfL,EAAY,MAAQ,EACtB,CAEA,eAAeM,GAAO,CACpB,GAAKV,EAAU,MAEf,CAAAC,EAAO,MAAQ,GACf,GAAI,CAEF,MAAMU,EAAe,CACnB,KAAMT,EAAS,MAAM,KACrB,YAAaA,EAAS,MAAM,aAAe,EAC7C,EAGAN,EAAK,OAAQe,CAAY,CAC1B,OAAQC,EAAO,CACd,QAAQ,MAAM,yBAA0BA,CAAK,CACjD,QAAY,CACRX,EAAO,MAAQ,EACjB,EACF,CAGA,OAAAY,EAAM,IAAMnB,EAAM,WAAaoB,GAAW,CACpCA,GAAUpB,EAAM,UAElBS,EAAiB,MAAQ,CAAE,GAAGT,EAAM,QAAS,EAG7CQ,EAAS,MAAQ,CACf,KAAMR,EAAM,SAAS,MAAQ,GAC7B,YAAaA,EAAM,SAAS,aAAe,EAC7C,IAGII,EAAK,OACPA,EAAK,MAAM,MAAM,EAEnBI,EAAS,MAAQ,CACf,KAAM,GACN,YAAa,EACf,EACAC,EAAiB,MAAQ,KAE7B,CAAC"}