import{c}from"./api-f0127578.js";import{d as $,r as u,c as y}from"./index-b8d30765.js";const D=$("categories",()=>{const r=u([]),n=u(!1),l=u(null),s=u(null),g=u(!1),d=y(()=>[...r.value].sort((e,a)=>e.name.localeCompare(a.name))),h=y(()=>e=>r.value.find(a=>a.id===e));async function p(){n.value=!0,l.value=null;try{const e=await c.getAll();r.value=e.data.categories||[]}catch(e){l.value=e.message||"Failed to fetch categories",console.error("Error fetching categories:",e)}finally{n.value=!1}}async function m(e){g.value=!0,l.value=null;try{const t=(await c.get(e)).data;s.value=t;const o=r.value.findIndex(i=>i.id===e);return o!==-1?r.value[o]=t:r.value.push(t),t}catch(a){return l.value=a.message||`Failed to fetch category with ID ${e}`,console.error(`Error fetching category ${e}:`,a),s.value=null,null}finally{g.value=!1}}async function w(e){n.value=!0,l.value=null;try{const t=(await c.create(e)).data,o=r.value.findIndex(i=>i.id===t.id);return o===-1?r.value.push(t):r.value[o]=t,t}catch(a){throw l.value=a.message||"Failed to create category",console.error("Error creating category:",a),a}finally{n.value=!1}}async function C(e,a,t){n.value=!0,l.value=null;try{let o=t;t&&typeof t=="object"&&t.paths&&(o=t.paths.join(","));const f=(await c.update(e,a,o)).data,v=r.value.findIndex(x=>x.id===e);return v!==-1&&(r.value[v]=f),s.value&&s.value.id===e&&(s.value=f),f}catch(o){throw l.value=o.message||`Failed to update category with ID ${e}`,console.error(`Error updating category ${e}:`,o),o}finally{n.value=!1}}async function I(e){n.value=!0,l.value=null;try{await c.delete(e),r.value=r.value.filter(a=>a.id!==e),s.value&&s.value.id===e&&(s.value=null)}catch(a){throw l.value=a.message||`Failed to delete category with ID ${e}`,console.error(`Error deleting category ${e}:`,a),a}finally{n.value=!1}}return{categories:r,loading:n,error:l,currentCategory:s,currentCategoryLoading:g,categoriesSorted:d,categoryById:h,fetchCategories:p,fetchCategory:m,createCategory:w,updateCategory:C,deleteCategory:I}});export{D as u};
//# sourceMappingURL=categories-b55ea028.js.map
