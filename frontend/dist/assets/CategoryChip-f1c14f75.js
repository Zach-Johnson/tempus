import{_ as R,u as W,r as v,c as T,o as X,e as u,f,g as I,j as t,D as pe,m as l,x as F,q as m,z as h,p as b,k as B,l as z,w as ge,C as L,F as Q,y as ye,A as Ve}from"./index-b8d30765.js";import{u as xe}from"./tags-ab17ae30.js";import{u as Y}from"./categories-b55ea028.js";import{C as ke}from"./CategoryFormDialog-a585f5ab.js";import{T as be}from"./TagFormDialog-6f407570.js";/* empty css                                                                     */const Ce={key:1,class:"text-caption text-grey ms-2"},_e={class:"pa-2"},he={__name:"CategorySelect",props:{modelValue:{type:[Array,Number,String],default:()=>[]},label:{type:String,default:"Categories"},placeholder:{type:String,default:"Select categories"},hint:{type:String,default:""},rules:{type:Array,default:()=>[]},density:{type:String,default:"default"},variant:{type:String,default:"outlined"},multiple:{type:Boolean,default:!1},chips:{type:Boolean,default:!1},clearable:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},itemValue:{type:String,default:"value"},itemTitle:{type:String,default:"title"},required:{type:Boolean,default:!1},chipColor:{type:String,default:"primary"},chipVariant:{type:String,default:"tonal"}},emits:["update:modelValue","category-created"],setup(a,{emit:U}){const s=a,y=U,d=Y(),C=W(),p=v(!1),g=T(()=>d.categories.map(c=>({title:c.name,value:c.id,description:c.description})));function k(){p.value=!0}async function i(c){try{const r=await d.createCategory(c);if(C.showSuccessMessage(`Category "${c.name}" created successfully`),p.value=!1,s.multiple){const S=Array.isArray(s.modelValue)?[...s.modelValue]:[];S.push(r.id),y("update:modelValue",S)}else y("update:modelValue",r.id);y("category-created",r)}catch(r){C.showErrorMessage(`Error creating category: ${r.message}`)}}return X(async()=>{d.categories.length===0&&await d.fetchCategories()}),(c,r)=>{const S=u("v-chip"),w=u("v-btn"),V=u("v-select");return f(),I("div",null,[t(V,{"model-value":a.modelValue,"onUpdate:modelValue":r[0]||(r[0]=x=>c.$emit("update:modelValue",x)),items:g.value,label:a.label,placeholder:a.placeholder,hint:a.hint,rules:a.rules,density:a.density,variant:a.variant,multiple:a.multiple,chips:a.chips,clearable:a.clearable,disabled:a.disabled||B(d).loading,loading:B(d).loading,"hide-details":"","item-value":a.itemValue,"item-title":a.itemTitle,required:a.required,eager:!0},pe({_:2},[a.chips&&a.multiple?{name:"selection",fn:l(({item:x,index:E})=>[E<3?(f(),F(S,{key:0,size:"small",color:a.chipColor,variant:a.chipVariant},{default:l(()=>[m(h(x.raw.title),1)]),_:2},1032,["color","variant"])):b("v-if",!0),E===3?(f(),I("span",Ce," (+"+h(a.modelValue.length-3)+" more) ",1)):b("v-if",!0)]),key:"0"}:void 0,B(d).loading&&g.value.length===0?{name:"no-data",fn:l(()=>[r[2]||(r[2]=z("div",{class:"pa-2"},"Loading categories...",-1))]),key:"1"}:g.value.length===0?{name:"no-data",fn:l(()=>[z("div",_e,[r[4]||(r[4]=m(" No categories available ")),t(w,{variant:"text",size:"small",color:"primary",class:"ms-2",onClick:k},{default:l(()=>r[3]||(r[3]=[m(" Create Category ")])),_:1})])]),key:"2"}:void 0]),1032,["model-value","items","label","placeholder","hint","rules","density","variant","multiple","chips","clearable","disabled","loading","item-value","item-title","required"]),b(" Create Category Dialog "),t(ke,{modelValue:p.value,"onUpdate:modelValue":r[1]||(r[1]=x=>p.value=x),category:{name:"",description:""},"is-edit":!1,onSave:i},null,8,["modelValue"])])}}},Se=R(he,[["__file","/Users/zachjohnson/w/repos/tempus/frontend/src/components/categories/CategorySelect.vue"]]),we={class:"d-flex align-center mb-2"},Ee={key:0,class:"text-body-2 text-grey mb-4"},Ie={key:1},Ue=["href"],De={__name:"ExerciseFormDialog",props:{modelValue:{type:Boolean,default:!1},exercise:{type:Object,default:null},isEdit:{type:Boolean,default:!1}},emits:["update:modelValue","save"],setup(a,{emit:U}){const s=a,y=U,d=xe(),C=Y();W();const p=v(null),g=v(!1),k=v(!1),i=v({name:"",description:"",categoryIds:[],tagIds:[],links:[]}),c=v(null),r=v(!1),S=v(null),w=v(!1),V=v({url:"",description:""}),x=v(!1),E=T({get:()=>s.modelValue,set:n=>y("update:modelValue",n)}),Z=T(()=>d.tags.map(n=>({title:n.name,value:n.id}))),ee=[n=>!!n||"Exercise name is required",n=>n&&n.length>=2||"Exercise name must be at least 2 characters",n=>n&&n.length<=50||"Exercise name must be less than 50 characters"],te=[n=>!!n||"URL is required",n=>/^(https?:\/\/)?([\da-z.-]+)\.([a-z.]{2,6})([/\w.-]*)*\/?$/.test(n)||"Enter a valid URL"];function le(){E.value=!1}async function j(){if(g.value){k.value=!0;try{const n={name:i.value.name,description:i.value.description||"",categoryIds:i.value.categoryIds.map(e=>Number(e)),tagIds:i.value.tagIds.map(e=>Number(e)),links:i.value.links};y("save",n)}catch(n){console.error("Error saving exercise:",n)}finally{k.value=!1}}}function ae(n){i.value.tagIds=i.value.tagIds.filter(e=>e!==n)}function oe(){V.value={url:"",description:""},r.value=!0}function M(){w.value&&(i.value.links.push({url:V.value.url,description:V.value.description}),r.value=!1)}function ne(n){i.value.links.splice(n,1)}function ie(){x.value=!0}function se(n){d.fetchTags().then(()=>{const e=d.tags.find(N=>N.name===n.name);e&&!i.value.tagIds.includes(e.id)&&i.value.tagIds.push(e.id)})}return ge(()=>s.modelValue,n=>{n&&s.exercise?(c.value={...s.exercise},i.value={name:s.exercise.name||"",description:s.exercise.description||"",categoryIds:s.exercise.categoryIds?[...s.exercise.categoryIds]:[],tagIds:s.exercise.tagIds?[...s.exercise.tagIds]:[],links:s.exercise.links?JSON.parse(JSON.stringify(s.exercise.links)):[]}):(p.value&&p.value.reset(),i.value={name:"",description:"",categoryIds:[],tagIds:[],links:[]},c.value=null)}),X(async()=>{d.tags.length===0&&await d.fetchTags(),C.categories.length===0&&await C.fetchCategories()}),(n,e)=>{const N=u("v-card-title"),$=u("v-text-field"),D=u("v-col"),re=u("v-textarea"),ue=u("v-chip"),q=u("v-icon"),_=u("v-btn"),de=u("v-select"),ce=u("v-list-item-title"),me=u("v-list-item"),ve=u("v-list"),fe=u("v-row"),O=u("v-form"),J=u("v-card-text"),P=u("v-spacer"),G=u("v-card-actions"),H=u("v-card"),K=u("v-dialog");return f(),I(Q,null,[t(K,{modelValue:E.value,"onUpdate:modelValue":e[5]||(e[5]=o=>E.value=o),"max-width":"800",persistent:""},{default:l(()=>[t(H,null,{default:l(()=>[t(N,{class:"text-h5"},{default:l(()=>{var o;return[m(h(a.isEdit?`Edit Exercise: ${(o=c.value)==null?void 0:o.name}`:"Create New Exercise"),1)]}),_:1}),t(J,null,{default:l(()=>[t(O,{ref_key:"form",ref:p,onSubmit:L(j,["prevent"]),modelValue:g.value,"onUpdate:modelValue":e[4]||(e[4]=o=>g.value=o)},{default:l(()=>[t(fe,null,{default:l(()=>[t(D,{cols:"12"},{default:l(()=>[t($,{modelValue:i.value.name,"onUpdate:modelValue":e[0]||(e[0]=o=>i.value.name=o),label:"Exercise Name",rules:ee,required:"",variant:"outlined",autofocus:""},null,8,["modelValue"])]),_:1}),t(D,{cols:"12"},{default:l(()=>[t(re,{modelValue:i.value.description,"onUpdate:modelValue":e[1]||(e[1]=o=>i.value.description=o),label:"Description",variant:"outlined",rows:"4",placeholder:"Provide a description for this exercise (optional)"},null,8,["modelValue"])]),_:1}),t(D,{cols:"12",md:"6"},{default:l(()=>[t(Se,{modelValue:i.value.categoryIds,"onUpdate:modelValue":e[2]||(e[2]=o=>i.value.categoryIds=o),label:"Categories",multiple:"",chips:""},null,8,["modelValue"])]),_:1}),t(D,{cols:"12",md:"6"},{default:l(()=>[t(de,{modelValue:i.value.tagIds,"onUpdate:modelValue":e[3]||(e[3]=o=>i.value.tagIds=o),items:Z.value,label:"Tags",multiple:"",chips:"",variant:"outlined",loading:B(d).loading},{selection:l(({item:o})=>[(f(),F(ue,{key:o.raw.value,closable:"","onClick:close":A=>ae(o.raw.value)},{default:l(()=>[m(h(o.title),1)]),_:2},1032,["onClick:close"]))]),"append-inner":l(()=>[t(_,{icon:"",size:"small",variant:"text",class:"ms-2",onClick:L(ie,["stop"])},{default:l(()=>[t(q,null,{default:l(()=>e[12]||(e[12]=[m("mdi-plus")])),_:1})]),_:1})]),_:1},8,["modelValue","items","loading"])]),_:1}),b(" External Resources Section "),t(D,{cols:"12"},{default:l(()=>[z("div",we,[e[13]||(e[13]=z("div",{class:"text-body-1 font-weight-medium"},"External Resources",-1)),t(_,{variant:"text",density:"compact",icon:"mdi-plus",size:"small",color:"primary",class:"ml-2",onClick:oe,title:"Add external resource"})]),i.value.links.length===0?(f(),I("div",Ee," No external resources added yet ")):(f(),I("div",Ie,[t(ve,{density:"compact"},{default:l(()=>[(f(!0),I(Q,null,ye(i.value.links,(o,A)=>(f(),F(me,{key:A},{prepend:l(()=>[t(q,{icon:"mdi-link",size:"small",class:"mr-2"})]),append:l(()=>[t(_,{icon:"",variant:"text",size:"small",color:"error",onClick:Fe=>ne(A)},{default:l(()=>[t(q,null,{default:l(()=>[...e[14]||(e[14]=[m("mdi-delete")])]),_:1})]),_:2},1032,["onClick"])]),default:l(()=>[t(ce,null,{default:l(()=>[z("a",{href:o.url,target:"_blank",rel:"noopener noreferrer"},h(o.description||o.url),9,Ue)]),_:2},1024)]),_:2},1024))),128))]),_:1})]))]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(G,null,{default:l(()=>[t(P),t(_,{color:"grey-darken-1",variant:"text",onClick:le},{default:l(()=>e[15]||(e[15]=[m(" Cancel ")])),_:1}),t(_,{color:"primary",variant:"flat",onClick:j,disabled:!g.value||!i.value.name,loading:k.value},{default:l(()=>[m(h(a.isEdit?"Update":"Create"),1)]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),b(" External Link Dialog "),t(K,{modelValue:r.value,"onUpdate:modelValue":e[10]||(e[10]=o=>r.value=o),"max-width":"600"},{default:l(()=>[t(H,null,{default:l(()=>[t(N,null,{default:l(()=>e[16]||(e[16]=[m("Add External Resource")])),_:1}),t(J,null,{default:l(()=>[t(O,{ref_key:"linkForm",ref:S,onSubmit:L(M,["prevent"]),modelValue:w.value,"onUpdate:modelValue":e[8]||(e[8]=o=>w.value=o)},{default:l(()=>[t($,{modelValue:V.value.url,"onUpdate:modelValue":e[6]||(e[6]=o=>V.value.url=o),label:"URL",rules:te,required:"",variant:"outlined",placeholder:"https://example.com",class:"mb-4"},null,8,["modelValue"]),t($,{modelValue:V.value.description,"onUpdate:modelValue":e[7]||(e[7]=o=>V.value.description=o),label:"Description",variant:"outlined",placeholder:"Description of the resource (optional)"},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1}),t(G,null,{default:l(()=>[t(P),t(_,{color:"grey-darken-1",variant:"text",onClick:e[9]||(e[9]=o=>r.value=!1)},{default:l(()=>e[17]||(e[17]=[m("Cancel")])),_:1}),t(_,{color:"primary",variant:"flat",onClick:M,disabled:!w.value},{default:l(()=>e[18]||(e[18]=[m(" Add ")])),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),b(" Tag Form Dialog "),t(be,{modelValue:x.value,"onUpdate:modelValue":e[11]||(e[11]=o=>x.value=o),tag:{name:"",category_ids:[]},"is-edit":!1,onSave:se},null,8,["modelValue"])],64)}}},Le=R(De,[["__file","/Users/zachjohnson/w/repos/tempus/frontend/src/components/exercises/ExerciseFormDialog.vue"]]),ze={__name:"CategoryChip",props:{category:{type:Object,required:!0},color:{type:String,default:"secondary"},variant:{type:String,default:"tonal"},size:{type:String,default:"small"},clickable:{type:Boolean,default:!1},closable:{type:Boolean,default:!1},showIcon:{type:Boolean,default:!0},icon:{type:String,default:"mdi-folder"},disableNavigation:{type:Boolean,default:!1}},emits:["click","close"],setup(a,{emit:U}){const s=a,y=U,d=Ve(),C=T(()=>s.clickable||!s.disableNavigation&&!s.closable);function p(){s.category&&(y("click",s.category),C.value&&!s.disableNavigation&&d.push({name:"category-detail",params:{id:s.category.id}}))}function g(k){s.category&&(k.stopPropagation(),y("close",s.category))}return(k,i)=>{const c=u("v-icon"),r=u("v-chip");return a.category?(f(),F(r,{key:0,color:a.color,variant:a.variant,size:a.size,closable:a.closable,onClick:p,"onClick:close":g,class:"category-chip"},{default:l(()=>[a.showIcon?(f(),F(c,{key:0,icon:a.icon,size:"small",class:"mr-1"},null,8,["icon"])):b("v-if",!0),m(" "+h(a.category.name),1)]),_:1},8,["color","variant","size","closable"])):b("v-if",!0)}}},Re=R(ze,[["__scopeId","data-v-2d20529f"],["__file","/Users/zachjohnson/w/repos/tempus/frontend/src/components/categories/CategoryChip.vue"]]);export{Re as C,Le as E};
//# sourceMappingURL=CategoryChip-f1c14f75.js.map
