import{_ as Z,u as ee,r as u,c as M,o as te,e as s,f as c,g as N,j as t,m as a,p as C,l as g,q as n,k as E,x as V,F as A,z as b,y as ae}from"./index-b8d30765.js";import{u as le}from"./tags-ab17ae30.js";import{u as oe}from"./categories-b55ea028.js";import{T as se}from"./TagFormDialog-6f407570.js";import"./api-f0127578.js";const ne={class:"d-flex justify-center align-center py-4"},re={class:"text-body-2 text-grey"},ie={__name:"TagsView",setup(ue){const r=le(),_=oe(),d=ee(),y=u(""),w=u(null),v=u(!1),x=u(!1),i=u(null),f=u(!1),h=u(!1),F=[{title:"Name",key:"name"},{title:"Categories",key:"categories"},{title:"Created",key:"createdAt"},{title:"Actions",key:"actions",sortable:!1}],$=M(()=>{let l=r.tags;if(y.value){const e=y.value.toLowerCase();l=l.filter(m=>m.name.toLowerCase().includes(e))}return w.value&&(l=l.filter(e=>e.categoryIds&&e.categoryIds.includes(parseInt(w.value)))),l}),I=M(()=>_.categories.map(l=>({title:l.name,value:l.id})));function U(l){const e=_.categoryById(l);return e?e.name:"Unknown"}function B(){i.value={name:"",categoryIds:[]},x.value=!1,v.value=!0}function L(l){i.value={...l},x.value=!0,v.value=!0}async function j(l){try{if(x.value){const e=i.value.id;await r.updateTag(e,l,"name,categoryIds"),d.showSuccessMessage(`Tag "${l.name}" updated successfully`)}else await r.createTag(l),d.showSuccessMessage(`Tag "${l.name}" created successfully`);v.value=!1}catch(e){d.showErrorMessage(`Error saving tag: ${e.message}`)}}function q(l){i.value=l,f.value=!0}async function Y(){h.value=!0;try{await r.deleteTag(i.value.id),d.showSuccessMessage(`Tag "${i.value.name}" deleted successfully`),f.value=!1}catch(l){d.showErrorMessage(`Error deleting tag: ${l.message}`)}finally{h.value=!1}}return te(async()=>{r.tags.length===0&&await r.fetchTags(),_.categories.length===0&&await _.fetchCategories()}),(l,e)=>{const m=s("v-col"),p=s("v-btn"),z=s("v-row"),G=s("v-text-field"),H=s("v-select"),T=s("v-card-text"),S=s("v-card"),J=s("v-progress-circular"),K=s("v-chip"),O=s("v-chip-group"),D=s("v-icon"),P=s("v-data-table"),Q=s("v-card-title"),R=s("v-spacer"),W=s("v-card-actions"),X=s("v-dialog");return c(),N("div",null,[t(z,{class:"mb-4"},{default:a(()=>[t(m,{cols:"12",sm:"8"},{default:a(()=>e[5]||(e[5]=[g("h1",{class:"text-h3"},"Tags",-1),g("p",{class:"text-body-1"},"Manage tags for categorizing exercises",-1)])),_:1}),t(m,{cols:"12",sm:"4",class:"d-flex justify-end align-center"},{default:a(()=>[t(p,{color:"primary","prepend-icon":"mdi-plus",onClick:B},{default:a(()=>e[6]||(e[6]=[n(" New Tag ")])),_:1})]),_:1})]),_:1}),C(" Search and filter "),t(S,{class:"mb-6"},{default:a(()=>[t(T,null,{default:a(()=>[t(z,null,{default:a(()=>[t(m,{cols:"12",sm:"6",md:"4"},{default:a(()=>[t(G,{modelValue:y.value,"onUpdate:modelValue":e[0]||(e[0]=o=>y.value=o),label:"Search tags",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-magnify","hide-details":"",clearable:""},null,8,["modelValue"])]),_:1}),t(m,{cols:"12",sm:"6",md:"4"},{default:a(()=>[t(H,{modelValue:w.value,"onUpdate:modelValue":e[1]||(e[1]=o=>w.value=o),items:I.value,label:"Filter by category",variant:"outlined",density:"compact","hide-details":"",clearable:""},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1})]),_:1}),C(" Tags list "),t(S,null,{default:a(()=>[E(r).loading?(c(),V(T,{key:0},{default:a(()=>[g("div",ne,[t(J,{indeterminate:"",color:"primary"})])]),_:1})):(c(),N(A,{key:1},[$.value.length>0?(c(),V(P,{key:0,headers:F,items:$.value,"items-per-page":10,class:"elevation-1"},{"item.createdAt":a(({item:o})=>[n(b(E(d).formatDate(o.createdAt)),1)]),"item.categories":a(({item:o})=>[t(O,null,{default:a(()=>[(c(!0),N(A,null,ae(o.categoryIds,k=>(c(),V(K,{key:k,size:"small",color:"primary",variant:"outlined",class:"mr-1"},{default:a(()=>[n(b(U(k)),1)]),_:2},1024))),128))]),_:2},1024)]),"item.actions":a(({item:o})=>[t(p,{icon:"",variant:"text",size:"small",color:"primary",onClick:k=>L(o)},{default:a(()=>[t(D,null,{default:a(()=>e[7]||(e[7]=[n("mdi-pencil")])),_:1})]),_:2},1032,["onClick"]),t(p,{icon:"",variant:"text",size:"small",color:"error",onClick:k=>q(o)},{default:a(()=>[t(D,null,{default:a(()=>e[8]||(e[8]=[n("mdi-delete")])),_:1})]),_:2},1032,["onClick"])]),_:1},8,["items"])):(c(),V(T,{key:1,class:"text-center py-8"},{default:a(()=>[t(D,{icon:"mdi-tag-off",size:"64",color:"grey-lighten-1",class:"mb-4"}),e[9]||(e[9]=g("h3",{class:"text-h6 mb-2"},"No tags found",-1)),g("p",re,b(E(r).tags.length===0?"You haven't created any tags yet":"No tags match your search criteria"),1)]),_:1}))],64))]),_:1}),C(" Create/Edit Dialog "),t(se,{modelValue:v.value,"onUpdate:modelValue":e[2]||(e[2]=o=>v.value=o),tag:i.value,"is-edit":x.value,onSave:j},null,8,["modelValue","tag","is-edit"]),C(" Delete Confirmation Dialog "),t(X,{modelValue:f.value,"onUpdate:modelValue":e[4]||(e[4]=o=>f.value=o),"max-width":"500"},{default:a(()=>[t(S,null,{default:a(()=>[t(Q,{class:"text-h5"},{default:a(()=>e[10]||(e[10]=[n("Delete Tag")])),_:1}),t(T,null,{default:a(()=>{var o;return[e[11]||(e[11]=n(" Are you sure you want to delete the tag ")),g("strong",null,b((o=i.value)==null?void 0:o.name),1),e[12]||(e[12]=n("? This will remove it from all exercises. This action cannot be undone. "))]}),_:1}),t(W,null,{default:a(()=>[t(R),t(p,{color:"grey-darken-1",variant:"text",onClick:e[3]||(e[3]=o=>f.value=!1)},{default:a(()=>e[13]||(e[13]=[n("Cancel")])),_:1}),t(p,{color:"error",variant:"flat",onClick:Y,loading:h.value},{default:a(()=>e[14]||(e[14]=[n(" Delete ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}},fe=Z(ie,[["__file","/Users/zachjohnson/w/repos/tempus/frontend/src/views/tags/TagsView.vue"]]);export{fe as default};
//# sourceMappingURL=TagsView-99528b7f.js.map
