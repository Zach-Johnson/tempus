import{_ as H,A as Y,B as G,u as J,r as y,c as k,o as K,e as l,f as i,g as b,j as a,m as t,p as S,l as v,q as u,E as O,k as D,x as f,F as Q,z as x}from"./index-b8d30765.js";import{u as W}from"./sessions-8c0d57dd.js";import{u as X}from"./exercises-a2ad682e.js";import"./api-f0127578.js";const Z={class:"d-flex justify-center align-center py-4"},ee={key:1,class:"text-grey"},te={class:"text-body-2 text-grey"},se={__name:"SessionsView",setup(ae){Y(),G();const c=W(),g=X(),h=J(),_=y(""),d=y(null),r=y([]),V=y(!1),B=[{title:"Date",key:"date"},{title:"Duration",key:"duration"},{title:"Exercises",key:"exercises"},{title:"Notes",key:"notes"},{title:"Actions",key:"actions",sortable:!1,align:"end"}],N=k(()=>{if(!r.value||r.value.length!==2)return"";const[o,e]=r.value;return!o||!e?"":`${o} to ${e}`}),E=k(()=>g.exercises.map(o=>({title:o.name,value:o.id}))),T=k(()=>{let o=c.sessions;if(_.value){const e=_.value.toLowerCase();o=o.filter(n=>n.notes&&n.notes.toLowerCase().includes(e))}if(d.value&&(o=o.filter(e=>e.exercises&&e.exercises.some(n=>n.exerciseId===parseInt(d.value)||n.exercise&&n.exercise.id===parseInt(d.value)))),r.value&&r.value.length===2&&r.value[0]&&r.value[1]){const e=new Date(r.value[0]),n=new Date(r.value[1]);n.setHours(23,59,59,999),o=o.filter(m=>{const p=new Date(m.startTime);return p>=e&&p<=n})}return[...o].sort((e,n)=>new Date(n.startTime)-new Date(e.startTime))});function F(o){return h.formatDate(o)}function R(o,e){return h.formatDuration(o,e)}function j(){r.value=[]}return K(async()=>{c.sessions.length===0&&await c.fetchSessions(),g.exercises.length===0&&await g.fetchExercises()}),(o,e)=>{const n=l("v-col"),m=l("v-btn"),p=l("v-row"),C=l("v-text-field"),A=l("v-select"),I=l("v-date-picker"),L=l("v-menu"),w=l("v-card-text"),U=l("v-card"),P=l("v-progress-circular"),$=l("v-chip"),z=l("v-icon"),M=l("v-data-table");return i(),b("div",null,[a(p,{class:"mb-4"},{default:t(()=>[a(n,{cols:"12",sm:"8"},{default:t(()=>e[6]||(e[6]=[v("h1",{class:"text-h3"},"Practice Sessions",-1),v("p",{class:"text-body-1"},"View your practice history",-1)])),_:1}),a(n,{cols:"12",sm:"4",class:"d-flex justify-end align-center"},{default:t(()=>[a(m,{color:"primary","prepend-icon":"mdi-plus",to:{name:"new-session"}},{default:t(()=>e[7]||(e[7]=[u(" New Session ")])),_:1})]),_:1})]),_:1}),S(" Search and filter "),a(U,{class:"mb-6"},{default:t(()=>[a(w,null,{default:t(()=>[a(p,null,{default:t(()=>[a(n,{cols:"12",sm:"6",md:"4"},{default:t(()=>[a(C,{modelValue:_.value,"onUpdate:modelValue":e[0]||(e[0]=s=>_.value=s),label:"Search sessions",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-magnify","hide-details":"",clearable:""},null,8,["modelValue"])]),_:1}),a(n,{cols:"12",sm:"6",md:"4"},{default:t(()=>[a(A,{modelValue:d.value,"onUpdate:modelValue":e[1]||(e[1]=s=>d.value=s),items:E.value,label:"Filter by exercise",variant:"outlined",density:"compact","hide-details":"",clearable:""},null,8,["modelValue","items"])]),_:1}),a(n,{cols:"12",sm:"6",md:"4"},{default:t(()=>[a(L,{modelValue:V.value,"onUpdate:modelValue":e[5]||(e[5]=s=>V.value=s),"close-on-content-click":!1,location:"bottom"},{activator:t(({props:s})=>[a(C,O({modelValue:N.value,"onUpdate:modelValue":e[2]||(e[2]=q=>N.value=q),label:"Date range",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-calendar",readonly:""},s,{clearable:"","onClick:clear":j}),null,16,["modelValue"])]),default:t(()=>[a(I,{modelValue:r.value,"onUpdate:modelValue":[e[3]||(e[3]=s=>r.value=s),e[4]||(e[4]=s=>V.value=!1)],range:""},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),S(" Sessions list "),a(U,null,{default:t(()=>[D(c).loading?(i(),f(w,{key:0},{default:t(()=>[v("div",Z,[a(P,{indeterminate:"",color:"primary"})])]),_:1})):(i(),b(Q,{key:1},[T.value.length>0?(i(),f(M,{key:0,headers:B,items:T.value,"items-per-page":10,class:"elevation-1"},{"item.date":t(({item:s})=>[u(x(F(s.startTime)),1)]),"item.duration":t(({item:s})=>[u(x(R(s.startTime,s.endTime)),1)]),"item.exercises":t(({item:s})=>[s.exercises?(i(),f($,{key:0,color:"primary",size:"small",variant:"outlined"},{default:t(()=>[u(x(s.exercises.length)+" exercises ",1)]),_:2},1024)):(i(),b("span",ee,"No exercises"))]),"item.actions":t(({item:s})=>[a(m,{icon:"",variant:"text",size:"small",color:"primary",to:{name:"session-detail",params:{id:s.id}}},{default:t(()=>[a(z,null,{default:t(()=>e[8]||(e[8]=[u("mdi-eye")])),_:1})]),_:2},1032,["to"])]),_:1},8,["items"])):(i(),f(w,{key:1,class:"text-center py-8"},{default:t(()=>[a(z,{icon:"mdi-calendar-blank",size:"64",color:"grey-lighten-1",class:"mb-4"}),e[10]||(e[10]=v("h3",{class:"text-h6 mb-2"},"No sessions found",-1)),v("p",te,x(D(c).sessions.length===0?"You haven't recorded any practice sessions yet":"No sessions match your search criteria"),1),D(c).sessions.length===0?(i(),f(m,{key:0,color:"primary",class:"mt-4",to:{name:"new-session"}},{default:t(()=>e[9]||(e[9]=[u(" Start Practicing ")])),_:1})):S("v-if",!0)]),_:1}))],64))]),_:1})])}}},ie=H(se,[["__file","/Users/zachjohnson/w/repos/tempus/frontend/src/views/sessions/SessionsView.vue"]]);export{ie as default};
//# sourceMappingURL=SessionsView-6f222faf.js.map
