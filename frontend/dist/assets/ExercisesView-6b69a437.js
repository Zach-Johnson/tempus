import{_ as re,A as ne,B as ie,u as ce,r as m,c as T,w as ue,o as de,e as o,f as r,g as f,j as s,m as a,p as g,l as _,q as n,k as j,x as E,F as C,z as B,y as R}from"./index-b8d30765.js";import{u as me}from"./exercises-a2ad682e.js";import{u as fe}from"./categories-b55ea028.js";import{u as pe}from"./tags-ab17ae30.js";import{E as ve,C as ge}from"./CategoryChip-f1c14f75.js";import{T as _e}from"./TagChip-689dc838.js";import"./api-f0127578.js";import"./CategoryFormDialog-a585f5ab.js";import"./TagFormDialog-6f407570.js";/* empty css                                                                     *//* empty css                                                                */const ye={class:"d-flex justify-center align-center py-4"},xe={key:0},ke={key:1,class:"text-grey"},we={class:"text-body-2 text-grey"},Ee={__name:"ExercisesView",setup(Ce){ne();const Y=ie(),u=me(),V=fe(),b=pe(),p=ce(),S=m(""),y=m(null),x=m(null),k=m(!1),h=m(!1),d=m(null),w=m(!1),F=m(!1),G=[{title:"Name",key:"name"},{title:"Description",key:"description"},{title:"Categories",key:"categories"},{title:"Tags",key:"tags"},{title:"Created",key:"createdAt"},{title:"Actions",key:"actions",sortable:!1}],z=T(()=>{let t=u.exercises;if(S.value){const e=S.value.toLowerCase();t=t.filter(i=>i.name.toLowerCase().includes(e)||i.description&&i.description.toLowerCase().includes(e))}return y.value&&(t=t.filter(e=>e.categoryIds&&e.categoryIds.includes(parseInt(y.value)))),x.value&&(t=t.filter(e=>e.tagIds&&e.tagIds.includes(parseInt(x.value)))),t}),H=T(()=>V.categories.map(t=>({title:t.name,value:t.id}))),J=T(()=>b.tags.map(t=>({title:t.name,value:t.id})));function K(t){return p.formatDate(t)}function O(t,e){return t?t.length>e?t.substring(0,e)+"...":t:""}function $(t){return V.categoryById(t)}function A(t){return b.tagById(t)}function P(){d.value={name:"",description:"",categoryIds:[],tagIds:[],links:[]},h.value=!1,k.value=!0}function Q(t){d.value={...t},h.value=!0,k.value=!0}async function W(t){try{if(h.value){const e=d.value.id;await u.updateExercise(e,t,"name,description,categoryIds,tagIds"),p.showSuccessMessage(`Exercise "${t.name}" updated successfully`)}else await u.createExercise(t),p.showSuccessMessage(`Exercise "${t.name}" created successfully`);k.value=!1}catch(e){p.showErrorMessage(`Error saving exercise: ${e.message}`)}}function X(t){d.value=t,w.value=!0}async function Z(){F.value=!0;try{await u.deleteExercise(d.value.id),p.showSuccessMessage(`Exercise "${d.value.name}" deleted successfully`),w.value=!1}catch(t){p.showErrorMessage(`Error deleting exercise: ${t.message}`)}finally{F.value=!1}}return ue(()=>Y.query,t=>{t.category&&(y.value=parseInt(t.category)),t.tag&&(x.value=parseInt(t.tag))},{immediate:!0}),de(async()=>{u.exercises.length===0&&await u.fetchExercises(),V.categories.length===0&&await V.fetchCategories(),b.tags.length===0&&await b.fetchTags()}),(t,e)=>{const i=o("v-col"),v=o("v-btn"),M=o("v-row"),q=o("v-text-field"),U=o("v-select"),I=o("v-card-text"),N=o("v-card"),ee=o("v-progress-circular"),L=o("v-chip-group"),D=o("v-icon"),te=o("v-data-table"),se=o("v-card-title"),ae=o("v-spacer"),le=o("v-card-actions"),oe=o("v-dialog");return r(),f("div",null,[s(M,{class:"mb-4"},{default:a(()=>[s(i,{cols:"12",sm:"8"},{default:a(()=>e[6]||(e[6]=[_("h1",{class:"text-h3"},"Exercises",-1),_("p",{class:"text-body-1"},"Manage your drumming exercises",-1)])),_:1}),s(i,{cols:"12",sm:"4",class:"d-flex justify-end align-center"},{default:a(()=>[s(v,{color:"primary","prepend-icon":"mdi-plus",onClick:P},{default:a(()=>e[7]||(e[7]=[n(" New Exercise ")])),_:1})]),_:1})]),_:1}),g(" Search and filter "),s(N,{class:"mb-6"},{default:a(()=>[s(I,null,{default:a(()=>[s(M,null,{default:a(()=>[s(i,{cols:"12",sm:"6",md:"4"},{default:a(()=>[s(q,{modelValue:S.value,"onUpdate:modelValue":e[0]||(e[0]=l=>S.value=l),label:"Search exercises",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-magnify","hide-details":"",clearable:""},null,8,["modelValue"])]),_:1}),s(i,{cols:"12",sm:"6",md:"4"},{default:a(()=>[s(U,{modelValue:y.value,"onUpdate:modelValue":e[1]||(e[1]=l=>y.value=l),items:H.value,label:"Filter by category",variant:"outlined",density:"compact","hide-details":"",clearable:""},null,8,["modelValue","items"])]),_:1}),s(i,{cols:"12",sm:"6",md:"4"},{default:a(()=>[s(U,{modelValue:x.value,"onUpdate:modelValue":e[2]||(e[2]=l=>x.value=l),items:J.value,label:"Filter by tag",variant:"outlined",density:"compact","hide-details":"",clearable:""},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1})]),_:1}),g(" Exercises list "),s(N,null,{default:a(()=>[j(u).loading?(r(),E(I,{key:0},{default:a(()=>[_("div",ye,[s(ee,{indeterminate:"",color:"primary"})])]),_:1})):(r(),f(C,{key:1},[z.value.length>0?(r(),E(te,{key:0,headers:G,items:z.value,"items-per-page":10,class:"elevation-1"},{"item.description":a(({item:l})=>[l.description?(r(),f("span",xe,B(O(l.description,80)),1)):(r(),f("span",ke,"No description"))]),"item.categories":a(({item:l})=>[s(L,null,{default:a(()=>[(r(!0),f(C,null,R(l.categoryIds||[],c=>(r(),f(C,{key:c},[$(c)?(r(),E(ge,{key:0,category:$(c),size:"small",class:"mr-1"},null,8,["category"])):g("v-if",!0)],64))),128))]),_:2},1024)]),"item.tags":a(({item:l})=>[s(L,null,{default:a(()=>[(r(!0),f(C,null,R(l.tagIds||[],c=>(r(),f(C,{key:c},[A(c)?(r(),E(_e,{key:0,tag:A(c),size:"small",class:"mr-1"},null,8,["tag"])):g("v-if",!0)],64))),128))]),_:2},1024)]),"item.createdAt":a(({item:l})=>[n(B(K(l.createdAt)),1)]),"item.actions":a(({item:l})=>[s(v,{icon:"",variant:"text",size:"small",color:"primary",onClick:c=>Q(l),class:"mr-1"},{default:a(()=>[s(D,null,{default:a(()=>e[8]||(e[8]=[n("mdi-pencil")])),_:1})]),_:2},1032,["onClick"]),s(v,{icon:"",variant:"text",size:"small",color:"primary",to:{name:"exercise-detail",params:{id:l.id}},class:"mr-1"},{default:a(()=>[s(D,null,{default:a(()=>e[9]||(e[9]=[n("mdi-eye")])),_:1})]),_:2},1032,["to"]),s(v,{icon:"",variant:"text",size:"small",color:"error",onClick:c=>X(l)},{default:a(()=>[s(D,null,{default:a(()=>e[10]||(e[10]=[n("mdi-delete")])),_:1})]),_:2},1032,["onClick"])]),_:1},8,["items"])):(r(),E(I,{key:1,class:"text-center py-8"},{default:a(()=>[s(D,{icon:"mdi-music-note-off",size:"64",color:"grey-lighten-1",class:"mb-4"}),e[11]||(e[11]=_("h3",{class:"text-h6 mb-2"},"No exercises found",-1)),_("p",we,B(j(u).exercises.length===0?"You haven't created any exercises yet":"No exercises match your search criteria"),1)]),_:1}))],64))]),_:1}),g(" Create/Edit Dialog "),s(ve,{modelValue:k.value,"onUpdate:modelValue":e[3]||(e[3]=l=>k.value=l),exercise:d.value,"is-edit":h.value,onSave:W},null,8,["modelValue","exercise","is-edit"]),g(" Delete Confirmation Dialog "),s(oe,{modelValue:w.value,"onUpdate:modelValue":e[5]||(e[5]=l=>w.value=l),"max-width":"500"},{default:a(()=>[s(N,null,{default:a(()=>[s(se,{class:"text-h5"},{default:a(()=>e[12]||(e[12]=[n("Delete Exercise")])),_:1}),s(I,null,{default:a(()=>{var l;return[e[13]||(e[13]=n(" Are you sure you want to delete the exercise ")),_("strong",null,B((l=d.value)==null?void 0:l.name),1),e[14]||(e[14]=n("? This action cannot be undone and will remove this exercise from all practice sessions. "))]}),_:1}),s(le,null,{default:a(()=>[s(ae),s(v,{color:"grey-darken-1",variant:"text",onClick:e[4]||(e[4]=l=>w.value=!1)},{default:a(()=>e[15]||(e[15]=[n("Cancel")])),_:1}),s(v,{color:"error",variant:"flat",onClick:Z,loading:F.value},{default:a(()=>e[16]||(e[16]=[n(" Delete ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}},$e=re(Ee,[["__file","/Users/zachjohnson/w/repos/tempus/frontend/src/views/exercises/ExercisesView.vue"]]);export{$e as default};
//# sourceMappingURL=ExercisesView-6b69a437.js.map
