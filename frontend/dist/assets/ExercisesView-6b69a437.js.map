{"version":3,"file":"ExercisesView-6b69a437.js","sources":["../../src/views/exercises/ExercisesView.vue"],"sourcesContent":["<template>\n  <div>\n    <v-row class=\"mb-4\">\n      <v-col cols=\"12\" sm=\"8\">\n        <h1 class=\"text-h3\">Exercises</h1>\n        <p class=\"text-body-1\">Manage your drumming exercises</p>\n      </v-col>\n      <v-col cols=\"12\" sm=\"4\" class=\"d-flex justify-end align-center\">\n        <v-btn\n          color=\"primary\"\n          prepend-icon=\"mdi-plus\"\n          @click=\"openCreateDialog\"\n        >\n          New Exercise\n        </v-btn>\n      </v-col>\n    </v-row>\n\n    <!-- Search and filter -->\n    <v-card class=\"mb-6\">\n      <v-card-text>\n        <v-row>\n          <v-col cols=\"12\" sm=\"6\" md=\"4\">\n            <v-text-field\n              v-model=\"search\"\n              label=\"Search exercises\"\n              variant=\"outlined\"\n              density=\"compact\"\n              prepend-inner-icon=\"mdi-magnify\"\n              hide-details\n              clearable\n            ></v-text-field>\n          </v-col>\n          <v-col cols=\"12\" sm=\"6\" md=\"4\">\n            <v-select\n              v-model=\"categoryFilter\"\n              :items=\"categoriesForSelect\"\n              label=\"Filter by category\"\n              variant=\"outlined\"\n              density=\"compact\"\n              hide-details\n              clearable\n            ></v-select>\n          </v-col>\n          <v-col cols=\"12\" sm=\"6\" md=\"4\">\n            <v-select\n              v-model=\"tagFilter\"\n              :items=\"tagsForSelect\"\n              label=\"Filter by tag\"\n              variant=\"outlined\"\n              density=\"compact\"\n              hide-details\n              clearable\n            ></v-select>\n          </v-col>\n        </v-row>\n      </v-card-text>\n    </v-card>\n\n    <!-- Exercises list -->\n    <v-card>\n      <v-card-text v-if=\"exercisesStore.loading\">\n        <div class=\"d-flex justify-center align-center py-4\">\n          <v-progress-circular indeterminate color=\"primary\"></v-progress-circular>\n        </div>\n      </v-card-text>\n      \n      <template v-else>\n        <v-data-table\n          v-if=\"filteredExercises.length > 0\"\n          :headers=\"headers\"\n          :items=\"filteredExercises\"\n          :items-per-page=\"10\"\n          class=\"elevation-1\"\n        >\n          <template v-slot:item.description=\"{ item }\">\n            <span v-if=\"item.description\">{{ truncateText(item.description, 80) }}</span>\n            <span v-else class=\"text-grey\">No description</span>\n          </template>\n          \n          <template v-slot:item.categories=\"{ item }\">\n            <v-chip-group>\n              <template v-for=\"categoryId in item.categoryIds || []\" :key=\"categoryId\">\n                <category-chip\n                  v-if=\"getCategoryById(categoryId)\"\n                  :category=\"getCategoryById(categoryId)\"\n                  size=\"small\"\n                  class=\"mr-1\"\n                ></category-chip>\n              </template>\n            </v-chip-group>\n          </template>\n          \n          <template v-slot:item.tags=\"{ item }\">\n            <v-chip-group>\n              <template v-for=\"tagId in item.tagIds || []\" :key=\"tagId\">\n                <tag-chip\n                  v-if=\"getTagById(tagId)\"\n                  :tag=\"getTagById(tagId)\"\n                  size=\"small\"\n                  class=\"mr-1\"\n                ></tag-chip>\n              </template>\n            </v-chip-group>\n          </template>\n          \n          <template v-slot:item.createdAt=\"{ item }\">\n            {{ formatDate(item.createdAt) }}\n          </template>\n\n          <template v-slot:item.actions=\"{ item }\">\n            <v-btn\n              icon\n              variant=\"text\"\n              size=\"small\"\n              color=\"primary\"\n              @click=\"openEditDialog(item)\"\n              class=\"mr-1\"\n            >\n              <v-icon>mdi-pencil</v-icon>\n            </v-btn>\n            <v-btn\n              icon\n              variant=\"text\"\n              size=\"small\"\n              color=\"primary\"\n              :to=\"{ name: 'exercise-detail', params: { id: item.id }}\"\n              class=\"mr-1\"\n            >\n              <v-icon>mdi-eye</v-icon>\n            </v-btn>\n            <v-btn\n              icon\n              variant=\"text\"\n              size=\"small\"\n              color=\"error\"\n              @click=\"confirmDelete(item)\"\n            >\n              <v-icon>mdi-delete</v-icon>\n            </v-btn>\n          </template>\n        </v-data-table>\n        \n        <v-card-text v-else class=\"text-center py-8\">\n          <v-icon icon=\"mdi-music-note-off\" size=\"64\" color=\"grey-lighten-1\" class=\"mb-4\"></v-icon>\n          <h3 class=\"text-h6 mb-2\">No exercises found</h3>\n          <p class=\"text-body-2 text-grey\">\n            {{ \n              exercisesStore.exercises.length === 0 \n                ? \"You haven't created any exercises yet\" \n                : \"No exercises match your search criteria\" \n            }}\n          </p>\n        </v-card-text>\n      </template>\n    </v-card>\n\n    <!-- Create/Edit Dialog -->\n    <exercise-form-dialog\n      v-model=\"dialogVisible\"\n      :exercise=\"selectedExercise\"\n      :is-edit=\"isEdit\"\n      @save=\"saveExercise\"\n    />\n\n    <!-- Delete Confirmation Dialog -->\n    <v-dialog v-model=\"deleteDialog\" max-width=\"500\">\n      <v-card>\n        <v-card-title class=\"text-h5\">Delete Exercise</v-card-title>\n        <v-card-text>\n          Are you sure you want to delete the exercise <strong>{{ selectedExercise?.name }}</strong>? \n          This action cannot be undone and will remove this exercise from all practice sessions.\n        </v-card-text>\n        <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-btn color=\"grey-darken-1\" variant=\"text\" @click=\"deleteDialog = false\">Cancel</v-btn>\n          <v-btn \n            color=\"error\" \n            variant=\"flat\" \n            @click=\"deleteExercise\" \n            :loading=\"deleteLoading\"\n          >\n            Delete\n          </v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted, watch } from 'vue'\nimport { useRouter, useRoute } from 'vue-router'\nimport { useExercisesStore } from '@/stores/exercises.js'\nimport { useCategoriesStore } from '@/stores/categories.js'\nimport { useTagsStore } from '@/stores/tags.js'\nimport { useAppStore } from '@/stores/app.js'\nimport ExerciseFormDialog from '@/components/exercises/ExerciseFormDialog.vue'\nimport CategoryChip from '@/components/categories/CategoryChip.vue'\nimport TagChip from '@/components/tags/TagChip.vue'\n\nconst router = useRouter()\nconst route = useRoute()\nconst exercisesStore = useExercisesStore()\nconst categoriesStore = useCategoriesStore()\nconst tagsStore = useTagsStore()\nconst appStore = useAppStore()\n\n// Data\nconst search = ref('')\nconst categoryFilter = ref(null)\nconst tagFilter = ref(null)\nconst dialogVisible = ref(false)\nconst isEdit = ref(false)\nconst selectedExercise = ref(null)\nconst deleteDialog = ref(false)\nconst deleteLoading = ref(false)\n\n// Table headers\nconst headers = [\n  { title: 'Name', key: 'name' },\n  { title: 'Description', key: 'description' },\n  { title: 'Categories', key: 'categories' },\n  { title: 'Tags', key: 'tags' },\n  { title: 'Created', key: 'createdAt' },\n  { title: 'Actions', key: 'actions', sortable: false }\n]\n\n// Computed\nconst filteredExercises = computed(() => {\n  let result = exercisesStore.exercises\n  \n  // Search filter\n  if (search.value) {\n    const searchLower = search.value.toLowerCase()\n    result = result.filter(exercise => \n      exercise.name.toLowerCase().includes(searchLower) || \n      (exercise.description && exercise.description.toLowerCase().includes(searchLower))\n    )\n  }\n  \n  // Category filter\n  if (categoryFilter.value) {\n    result = result.filter(exercise => \n      exercise.categoryIds && exercise.categoryIds.includes(parseInt(categoryFilter.value))\n    )\n  }\n  \n  // Tag filter\n  if (tagFilter.value) {\n    result = result.filter(exercise => \n      exercise.tagIds && exercise.tagIds.includes(parseInt(tagFilter.value))\n    )\n  }\n  \n  return result\n})\n\nconst categoriesForSelect = computed(() => {\n  return categoriesStore.categories.map(category => ({\n    title: category.name,\n    value: category.id\n  }))\n})\n\nconst tagsForSelect = computed(() => {\n  return tagsStore.tags.map(tag => ({\n    title: tag.name,\n    value: tag.id\n  }))\n})\n\n// Methods\nfunction formatDate(dateString) {\n  return appStore.formatDate(dateString)\n}\n\nfunction truncateText(text, maxLength) {\n  if (!text) return ''\n  return text.length > maxLength \n    ? text.substring(0, maxLength) + '...' \n    : text\n}\n\nfunction getCategoryById(categoryId) {\n  return categoriesStore.categoryById(categoryId)\n}\n\nfunction getTagById(tagId) {\n  return tagsStore.tagById(tagId)\n}\n\nfunction openCreateDialog() {\n  selectedExercise.value = {\n    name: '',\n    description: '',\n    categoryIds: [],\n    tagIds: [],\n    links: []\n  }\n  isEdit.value = false\n  dialogVisible.value = true\n}\n\nfunction openEditDialog(exercise) {\n  selectedExercise.value = { ...exercise }\n  isEdit.value = true\n  dialogVisible.value = true\n}\n\nasync function saveExercise(exerciseData) {\n  try {\n    if (isEdit.value) {\n      const id = selectedExercise.value.id\n      await exercisesStore.updateExercise(id, exerciseData, 'name,description,categoryIds,tagIds')\n      appStore.showSuccessMessage(`Exercise \"${exerciseData.name}\" updated successfully`)\n    } else {\n      await exercisesStore.createExercise(exerciseData)\n      appStore.showSuccessMessage(`Exercise \"${exerciseData.name}\" created successfully`)\n    }\n    dialogVisible.value = false\n  } catch (error) {\n    appStore.showErrorMessage(`Error saving exercise: ${error.message}`)\n  }\n}\n\nfunction confirmDelete(exercise) {\n  selectedExercise.value = exercise\n  deleteDialog.value = true\n}\n\nasync function deleteExercise() {\n  deleteLoading.value = true\n  try {\n    await exercisesStore.deleteExercise(selectedExercise.value.id)\n    appStore.showSuccessMessage(`Exercise \"${selectedExercise.value.name}\" deleted successfully`)\n    deleteDialog.value = false\n  } catch (error) {\n    appStore.showErrorMessage(`Error deleting exercise: ${error.message}`)\n  } finally {\n    deleteLoading.value = false\n  }\n}\n\n// Watch for query parameters to apply filters\nwatch(() => route.query, (query) => {\n  if (query.category) {\n    categoryFilter.value = parseInt(query.category)\n  }\n  \n  if (query.tag) {\n    tagFilter.value = parseInt(query.tag)\n  }\n}, { immediate: true })\n\n// Lifecycle\nonMounted(async () => {\n  // Load data if not already loaded\n  if (exercisesStore.exercises.length === 0) {\n    await exercisesStore.fetchExercises()\n  }\n  \n  if (categoriesStore.categories.length === 0) {\n    await categoriesStore.fetchCategories()\n  }\n  \n  if (tagsStore.tags.length === 0) {\n    await tagsStore.fetchTags()\n  }\n})\n</script>\n"],"names":["useRouter","route","useRoute","exercisesStore","useExercisesStore","categoriesStore","useCategoriesStore","tagsStore","useTagsStore","appStore","useAppStore","search","ref","categoryFilter","tagFilter","dialogVisible","isEdit","selectedExercise","deleteDialog","deleteLoading","headers","filteredExercises","computed","result","searchLower","exercise","categoriesForSelect","category","tagsForSelect","tag","formatDate","dateString","truncateText","text","maxLength","getCategoryById","categoryId","getTagById","tagId","openCreateDialog","openEditDialog","saveExercise","exerciseData","id","error","confirmDelete","deleteExercise","watch","query","onMounted"],"mappings":"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"}