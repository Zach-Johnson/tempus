import{t as u}from"./api-f0127578.js";import{d as x,r as c,c as f}from"./index-b8d30765.js";const S=x("tags",()=>{const t=c([]),n=c(!1),r=c(null),o=c(null),g=c(!1),d=f(()=>[...t.value].sort((a,e)=>a.name.localeCompare(e.name))),h=f(()=>a=>t.value.find(e=>e.id===a)),y=f(()=>a=>t.value.filter(e=>e.categoryIds&&e.categoryIds.includes(a)));async function p(a={}){n.value=!0,r.value=null;try{const e=await u.getAll(a);t.value=e.data.tags||[]}catch(e){r.value=e.message||"Failed to fetch tags",console.error("Error fetching tags:",e)}finally{n.value=!1}}async function m(a){g.value=!0,r.value=null;try{const e=await u.get(a);o.value=e.data;const l=t.value.findIndex(s=>s.id===a);l!==-1?t.value[l]=e.data:t.value.push(e.data)}catch(e){r.value=e.message||`Failed to fetch tag with ID ${a}`,console.error(`Error fetching tag ${a}:`,e)}finally{g.value=!1}}async function w(a){n.value=!0,r.value=null;try{const l=(await u.create(a)).data;return t.value.push(l),l}catch(e){throw r.value=e.message||"Failed to create tag",console.error("Error creating tag:",e),e}finally{n.value=!1}}async function T(a,e,l){n.value=!0,r.value=null;try{let s=l;l&&typeof l=="object"&&l.paths&&(s=l.paths.join(","));const i=(await u.update(a,e,s)).data,v=t.value.findIndex($=>$.id===a);return v!==-1&&(t.value[v]=i),o.value&&o.value.id===a&&(o.value=i),i}catch(s){throw r.value=s.message||`Failed to update tag with ID ${a}`,console.error(`Error updating tag ${a}:`,s),s}finally{n.value=!1}}async function I(a){n.value=!0,r.value=null;try{await u.delete(a),t.value=t.value.filter(e=>e.id!==a),o.value&&o.value.id===a&&(o.value=null)}catch(e){throw r.value=e.message||`Failed to delete tag with ID ${a}`,console.error(`Error deleting tag ${a}:`,e),e}finally{n.value=!1}}return{tags:t,loading:n,error:r,currentTag:o,currentTagLoading:g,tagsSorted:d,tagById:h,tagsByCategory:y,fetchTags:p,fetchTag:m,createTag:w,updateTag:T,deleteTag:I}});export{S as u};
//# sourceMappingURL=tags-ab17ae30.js.map
