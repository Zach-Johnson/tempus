import{_ as R,r as i,c as b,w as G,o as H,e as o,f as w,x as T,m as l,j as n,q as d,z as p,C as I,k as J,l as K}from"./index-b8d30765.js";import{u as L}from"./categories-b55ea028.js";const P={__name:"TagFormDialog",props:{modelValue:{type:Boolean,default:!1},tag:{type:Object,default:null},isEdit:{type:Boolean,default:!1}},emits:["update:modelValue","save"],setup(m,{emit:k}){const r=m,y=k,u=L(),v=i(null),c=i(!1),_=i(!1),s=i({name:"",category_ids:[]}),g=i(null),f=b({get:()=>r.modelValue,set:e=>y("update:modelValue",e)}),h=b(()=>u.categories.map(e=>({title:e.name,value:e.id}))),D=[e=>!!e||"Tag name is required",e=>e&&e.length>=2||"Tag name must be at least 2 characters",e=>e&&e.length<=30||"Tag name must be less than 30 characters"];function N(){f.value=!1}async function V(){if(c.value){_.value=!0;try{const e={name:s.value.name,category_ids:s.value.category_ids.map(a=>Number(a))};y("save",e)}catch(e){console.error("Error saving tag:",e)}finally{_.value=!1}}}function U(e){s.value.category_ids=s.value.category_ids.filter(a=>a!==e)}return G(()=>r.modelValue,e=>{e&&r.tag?(g.value={...r.tag},s.value={name:r.tag.name||"",category_ids:r.tag.category_ids?[...r.tag.category_ids]:[]}):(v.value&&v.value.reset(),s.value={name:"",category_ids:[]},g.value=null)}),H(async()=>{u.categories.length===0&&await u.fetchCategories()}),(e,a)=>{const B=o("v-card-title"),E=o("v-text-field"),x=o("v-col"),S=o("v-chip"),F=o("v-select"),j=o("v-row"),q=o("v-form"),M=o("v-card-text"),z=o("v-spacer"),C=o("v-btn"),$=o("v-card-actions"),A=o("v-card"),O=o("v-dialog");return w(),T(O,{modelValue:f.value,"onUpdate:modelValue":a[3]||(a[3]=t=>f.value=t),"max-width":"600",persistent:""},{default:l(()=>[n(A,null,{default:l(()=>[n(B,{class:"text-h5"},{default:l(()=>{var t;return[d(p(m.isEdit?`Edit Tag: ${(t=g.value)==null?void 0:t.name}`:"Create New Tag"),1)]}),_:1}),n(M,null,{default:l(()=>[n(q,{ref_key:"form",ref:v,onSubmit:I(V,["prevent"]),modelValue:c.value,"onUpdate:modelValue":a[2]||(a[2]=t=>c.value=t)},{default:l(()=>[n(j,null,{default:l(()=>[n(x,{cols:"12"},{default:l(()=>[n(E,{modelValue:s.value.name,"onUpdate:modelValue":a[0]||(a[0]=t=>s.value.name=t),label:"Tag Name",rules:D,required:"",variant:"outlined",autofocus:""},null,8,["modelValue"])]),_:1}),n(x,{cols:"12"},{default:l(()=>[n(F,{modelValue:s.value.category_ids,"onUpdate:modelValue":a[1]||(a[1]=t=>s.value.category_ids=t),items:h.value,label:"Categories",multiple:"",chips:"",variant:"outlined",loading:J(u).loading},{selection:l(({item:t})=>[(w(),T(S,{key:t.raw.value,closable:"","onClick:close":Q=>U(t.raw.value)},{default:l(()=>[d(p(t.title),1)]),_:2},1032,["onClick:close"]))]),_:1},8,["modelValue","items","loading"]),a[4]||(a[4]=K("div",{class:"text-caption text-grey"}," Assign this tag to one or more categories ",-1))]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),n($,null,{default:l(()=>[n(z),n(C,{color:"grey-darken-1",variant:"text",onClick:N},{default:l(()=>a[5]||(a[5]=[d(" Cancel ")])),_:1}),n(C,{color:"primary",variant:"flat",onClick:V,disabled:!c.value||!s.value.name,loading:_.value},{default:l(()=>[d(p(m.isEdit?"Update":"Create"),1)]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},Y=R(P,[["__file","/Users/zachjohnson/w/repos/tempus/frontend/src/components/tags/TagFormDialog.vue"]]);export{Y as T};
//# sourceMappingURL=TagFormDialog-6f407570.js.map
