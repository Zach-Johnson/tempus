import{e as u}from"./api-f0127578.js";import{d as _,r as o,c as v}from"./index-b8d30765.js";const T=_("exercises",()=>{const s=o([]),n=o(!1),t=o(null),r=o(null),f=o(!1),h=o(null),d=o(!1),m=v(()=>[...s.value].sort((a,e)=>a.name.localeCompare(e.name))),x=v(()=>a=>s.value.find(e=>e.id===a)),w=v(()=>a=>s.value.filter(e=>e.categoryIds&&e.categoryIds.includes(a))),E=v(()=>a=>s.value.filter(e=>e.tag_ids&&e.tag_ids.includes(a)));async function p(a={}){n.value=!0,t.value=null;try{const e=await u.getAll(a);s.value=e.data.exercises||[]}catch(e){t.value=e.message||"Failed to fetch exercises",console.error("Error fetching exercises:",e)}finally{n.value=!1}}async function $(a){f.value=!0,t.value=null;try{const e=await u.get(a);r.value=e.data;const l=s.value.findIndex(i=>i.id===a);l!==-1?s.value[l]=e.data:s.value.push(e.data)}catch(e){t.value=e.message||`Failed to fetch exercise with ID ${a}`,console.error(`Error fetching exercise ${a}:`,e)}finally{f.value=!1}}async function k(a){n.value=!0,t.value=null;try{const l=(await u.create(a)).data;return s.value.push(l),l}catch(e){throw t.value=e.message||"Failed to create exercise",console.error("Error creating exercise:",e),e}finally{n.value=!1}}async function F(a,e,l){n.value=!0,t.value=null;try{let i=l;l&&typeof l=="object"&&l.paths&&(i=l.paths.join(","));const g=(await u.update(a,e,i)).data,y=s.value.findIndex(C=>C.id===a);return y!==-1&&(s.value[y]=g),r.value&&r.value.id===a&&(r.value=g),g}catch(i){throw t.value=i.message||`Failed to update exercise with ID ${a}`,console.error(`Error updating exercise ${a}:`,i),i}finally{n.value=!1}}async function D(a){n.value=!0,t.value=null;try{await u.delete(a),s.value=s.value.filter(e=>e.id!==a),r.value&&r.value.id===a&&(r.value=null)}catch(e){throw t.value=e.message||`Failed to delete exercise with ID ${a}`,console.error(`Error deleting exercise ${a}:`,e),e}finally{n.value=!1}}async function L(a,e){n.value=!0,t.value=null;try{const l=await u.addImage(a,e),i=s.value.find(c=>c.id===a);return i&&(i.images||(i.images=[]),i.images.push(l.data)),r.value&&r.value.id===a&&(r.value.images||(r.value.images=[]),r.value.images.push(l.data)),l.data}catch(l){throw t.value=l.message||`Failed to add image to exercise with ID ${a}`,console.error(`Error adding image to exercise ${a}:`,l),l}finally{n.value=!1}}async function S(a){n.value=!0,t.value=null;try{await u.deleteImage(a),s.value.forEach(e=>{e.images&&(e.images=e.images.filter(l=>l.id!==a))}),r.value&&r.value.images&&(r.value.images=r.value.images.filter(e=>e.id!==a))}catch(e){throw t.value=e.message||`Failed to delete image with ID ${a}`,console.error(`Error deleting image ${a}:`,e),e}finally{n.value=!1}}async function B(a,e){n.value=!0,t.value=null;try{const l=await u.addLink(a,e),i=s.value.find(c=>c.id===a);return i&&(i.links||(i.links=[]),i.links.push(l.data)),r.value&&r.value.id===a&&(r.value.links||(r.value.links=[]),r.value.links.push(l.data)),l.data}catch(l){throw t.value=l.message||`Failed to add link to exercise with ID ${a}`,console.error(`Error adding link to exercise ${a}:`,l),l}finally{n.value=!1}}async function j(a){n.value=!0,t.value=null;try{await u.deleteLink(a),s.value.forEach(e=>{e.links&&(e.links=e.links.filter(l=>l.id!==a))}),r.value&&r.value.links&&(r.value.links=r.value.links.filter(e=>e.id!==a))}catch(e){throw t.value=e.message||`Failed to delete link with ID ${a}`,console.error(`Error deleting link ${a}:`,e),e}finally{n.value=!1}}async function A(a,e={}){d.value=!0,t.value=null;try{const l=await u.getStats(a,e);return h.value=l.data,l.data}catch(l){throw t.value=l.message||`Failed to fetch stats for exercise with ID ${a}`,console.error(`Error fetching stats for exercise ${a}:`,l),l}finally{d.value=!1}}return{exercises:s,loading:n,error:t,currentExercise:r,currentExerciseLoading:f,exerciseStats:h,statsLoading:d,exercisesSorted:m,exerciseById:x,exercisesByCategory:w,exercisesByTag:E,fetchExercises:p,fetchExercise:$,createExercise:k,updateExercise:F,deleteExercise:D,addExerciseImage:L,deleteExerciseImage:S,addExerciseLink:B,deleteExerciseLink:j,fetchExerciseStats:A}});export{T as u};
//# sourceMappingURL=exercises-a2ad682e.js.map
