import{_ as K,u as O,r as v,c as P,o as Q,e as n,f as u,g as k,j as t,m as a,p as V,l as g,q as r,k as N,x as D,F as R,z as b}from"./index-b8d30765.js";import{u as W}from"./categories-b55ea028.js";import{C as X}from"./CategoryFormDialog-a585f5ab.js";import"./api-f0127578.js";const Z={class:"d-flex justify-center align-center py-4"},ee={key:0},te={key:1,class:"text-grey"},ae={class:"text-body-2 text-grey"},oe={__name:"CategoriesView",setup(se){const i=W(),m=O(),y=v(""),p=v(!1),C=v(!1),c=v(null),_=v(!1),h=v(!1),$=[{title:"Name",key:"name"},{title:"Description",key:"description"},{title:"Created",key:"createdAt"},{title:"Actions",key:"actions",sortable:!1}],E=P(()=>{const o=[],e=new Set;i.categories.forEach(l=>{e.has(l.id)||(e.add(l.id),o.push(l))});let d=o;if(y.value){const l=y.value.toLowerCase();d=d.filter(f=>f.name.toLowerCase().includes(l)||f.description&&f.description.toLowerCase().includes(l))}return d});function z(o){return m.formatDate(o)}function M(o,e){return o?o.length>e?o.substring(0,e)+"...":o:""}function A(){c.value={name:"",description:""},C.value=!1,p.value=!0}function j(o){c.value={...o},C.value=!0,p.value=!0}async function B(o){try{if(C.value){const e=c.value.id;await i.updateCategory(e,o,"name,description"),m.showSuccessMessage(`Category "${o.name}" updated successfully`)}else await i.createCategory(o),m.showSuccessMessage(`Category "${o.name}" created successfully`);p.value=!1}catch(e){m.showErrorMessage(`Error saving category: ${e.message}`)}}function L(o){c.value=o,_.value=!0}async function T(){h.value=!0;try{await i.deleteCategory(c.value.id),m.showSuccessMessage(`Category "${c.value.name}" deleted successfully`),_.value=!1}catch(o){m.showErrorMessage(`Error deleting category: ${o.message}`)}finally{h.value=!1}}return Q(async()=>{i.categories.length===0&&await i.fetchCategories()}),(o,e)=>{const d=n("v-col"),l=n("v-btn"),f=n("v-row"),U=n("v-text-field"),w=n("v-card-text"),S=n("v-card"),F=n("v-progress-circular"),x=n("v-icon"),q=n("v-data-table"),I=n("v-card-title"),Y=n("v-spacer"),G=n("v-card-actions"),H=n("v-dialog");return u(),k("div",null,[t(f,{class:"mb-4"},{default:a(()=>[t(d,{cols:"12",sm:"8"},{default:a(()=>e[4]||(e[4]=[g("h1",{class:"text-h3"},"Categories",-1),g("p",{class:"text-body-1"},"Manage categories for organizing your exercises",-1)])),_:1}),t(d,{cols:"12",sm:"4",class:"d-flex justify-end align-center"},{default:a(()=>[t(l,{color:"primary","prepend-icon":"mdi-plus",onClick:A},{default:a(()=>e[5]||(e[5]=[r(" New Category ")])),_:1})]),_:1})]),_:1}),V(" Search "),t(S,{class:"mb-6"},{default:a(()=>[t(w,null,{default:a(()=>[t(f,null,{default:a(()=>[t(d,{cols:"12",sm:"6",md:"4"},{default:a(()=>[t(U,{modelValue:y.value,"onUpdate:modelValue":e[0]||(e[0]=s=>y.value=s),label:"Search categories",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-magnify","hide-details":"",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),V(" Categories list "),t(S,null,{default:a(()=>[N(i).loading?(u(),D(w,{key:0},{default:a(()=>[g("div",Z,[t(F,{indeterminate:"",color:"primary"})])]),_:1})):(u(),k(R,{key:1},[E.value.length>0?(u(),D(q,{key:0,headers:$,items:E.value,"items-per-page":10,class:"elevation-1"},{"item.description":a(({item:s})=>[s.description?(u(),k("span",ee,b(M(s.description,80)),1)):(u(),k("span",te,"No description"))]),"item.createdAt":a(({item:s})=>[r(b(z(s.createdAt)),1)]),"item.actions":a(({item:s})=>[t(l,{icon:"",variant:"text",size:"small",color:"primary",onClick:J=>j(s),class:"mr-1"},{default:a(()=>[t(x,null,{default:a(()=>e[6]||(e[6]=[r("mdi-pencil")])),_:1})]),_:2},1032,["onClick"]),t(l,{icon:"",variant:"text",size:"small",color:"primary",to:{name:"category-detail",params:{id:s.id}},class:"mr-1"},{default:a(()=>[t(x,null,{default:a(()=>e[7]||(e[7]=[r("mdi-eye")])),_:1})]),_:2},1032,["to"]),t(l,{icon:"",variant:"text",size:"small",color:"error",onClick:J=>L(s)},{default:a(()=>[t(x,null,{default:a(()=>e[8]||(e[8]=[r("mdi-delete")])),_:1})]),_:2},1032,["onClick"])]),_:1},8,["items"])):(u(),D(w,{key:1,class:"text-center py-8"},{default:a(()=>[t(x,{icon:"mdi-folder-off",size:"64",color:"grey-lighten-1",class:"mb-4"}),e[9]||(e[9]=g("h3",{class:"text-h6 mb-2"},"No categories found",-1)),g("p",ae,b(N(i).categories.length===0?"You haven't created any categories yet":"No categories match your search criteria"),1)]),_:1}))],64))]),_:1}),V(" Create/Edit Dialog "),t(X,{modelValue:p.value,"onUpdate:modelValue":e[1]||(e[1]=s=>p.value=s),category:c.value,"is-edit":C.value,onSave:B},null,8,["modelValue","category","is-edit"]),V(" Delete Confirmation Dialog "),t(H,{modelValue:_.value,"onUpdate:modelValue":e[3]||(e[3]=s=>_.value=s),"max-width":"500"},{default:a(()=>[t(S,null,{default:a(()=>[t(I,{class:"text-h5"},{default:a(()=>e[10]||(e[10]=[r("Delete Category")])),_:1}),t(w,null,{default:a(()=>{var s;return[e[11]||(e[11]=r(" Are you sure you want to delete the category ")),g("strong",null,b((s=c.value)==null?void 0:s.name),1),e[12]||(e[12]=r("? This will also remove it from all associated tags and exercises. This action cannot be undone. "))]}),_:1}),t(G,null,{default:a(()=>[t(Y),t(l,{color:"grey-darken-1",variant:"text",onClick:e[2]||(e[2]=s=>_.value=!1)},{default:a(()=>e[13]||(e[13]=[r("Cancel")])),_:1}),t(l,{color:"error",variant:"flat",onClick:T,loading:h.value},{default:a(()=>e[14]||(e[14]=[r(" Delete ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}},ce=K(oe,[["__file","/Users/zachjohnson/w/repos/tempus/frontend/src/views/categories/CategoriesView.vue"]]);export{ce as default};
//# sourceMappingURL=CategoriesView-6bc85a23.js.map
