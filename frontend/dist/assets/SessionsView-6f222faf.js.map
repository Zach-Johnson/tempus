{"version":3,"file":"SessionsView-6f222faf.js","sources":["../../src/views/sessions/SessionsView.vue"],"sourcesContent":["<template>\n  <div>\n    <v-row class=\"mb-4\">\n      <v-col cols=\"12\" sm=\"8\">\n        <h1 class=\"text-h3\">Practice Sessions</h1>\n        <p class=\"text-body-1\">View your practice history</p>\n      </v-col>\n      <v-col cols=\"12\" sm=\"4\" class=\"d-flex justify-end align-center\">\n        <v-btn\n          color=\"primary\"\n          prepend-icon=\"mdi-plus\"\n          :to=\"{ name: 'new-session' }\"\n        >\n          New Session\n        </v-btn>\n      </v-col>\n    </v-row>\n\n    <!-- Search and filter -->\n    <v-card class=\"mb-6\">\n      <v-card-text>\n        <v-row>\n          <v-col cols=\"12\" sm=\"6\" md=\"4\">\n            <v-text-field\n              v-model=\"search\"\n              label=\"Search sessions\"\n              variant=\"outlined\"\n              density=\"compact\"\n              prepend-inner-icon=\"mdi-magnify\"\n              hide-details\n              clearable\n            ></v-text-field>\n          </v-col>\n          <v-col cols=\"12\" sm=\"6\" md=\"4\">\n            <v-select\n              v-model=\"exerciseFilter\"\n              :items=\"exercisesForSelect\"\n              label=\"Filter by exercise\"\n              variant=\"outlined\"\n              density=\"compact\"\n              hide-details\n              clearable\n            ></v-select>\n          </v-col>\n          <v-col cols=\"12\" sm=\"6\" md=\"4\">\n            <v-menu\n              v-model=\"dateMenu\"\n              :close-on-content-click=\"false\"\n              location=\"bottom\"\n            >\n              <template v-slot:activator=\"{ props }\">\n                <v-text-field\n                  v-model=\"dateRangeText\"\n                  label=\"Date range\"\n                  variant=\"outlined\"\n                  density=\"compact\"\n                  prepend-inner-icon=\"mdi-calendar\"\n                  readonly\n                  v-bind=\"props\"\n                  clearable\n                  @click:clear=\"clearDateRange\"\n                ></v-text-field>\n              </template>\n              <v-date-picker\n                v-model=\"dateRange\"\n                range\n                @update:model-value=\"dateMenu = false\"\n              ></v-date-picker>\n            </v-menu>\n          </v-col>\n        </v-row>\n      </v-card-text>\n    </v-card>\n\n    <!-- Sessions list -->\n    <v-card>\n      <v-card-text v-if=\"sessionsStore.loading\">\n        <div class=\"d-flex justify-center align-center py-4\">\n          <v-progress-circular indeterminate color=\"primary\"></v-progress-circular>\n        </div>\n      </v-card-text>\n      \n      <template v-else>\n        <v-data-table\n          v-if=\"filteredSessions.length > 0\"\n          :headers=\"headers\"\n          :items=\"filteredSessions\"\n          :items-per-page=\"10\"\n          class=\"elevation-1\"\n        >\n          <template v-slot:item.date=\"{ item }\">\n            {{ formatDate(item.startTime) }}\n          </template>\n          \n          <template v-slot:item.duration=\"{ item }\">\n            {{ formatDuration(item.startTime, item.endTime) }}\n          </template>\n          \n          <template v-slot:item.exercises=\"{ item }\">\n            <v-chip\n              v-if=\"item.exercises\"\n              color=\"primary\"\n              size=\"small\"\n              variant=\"outlined\"\n            >\n              {{ item.exercises.length }} exercises\n            </v-chip>\n            <span v-else class=\"text-grey\">No exercises</span>\n          </template>\n          \n          <template v-slot:item.actions=\"{ item }\">\n            <v-btn\n              icon\n              variant=\"text\"\n              size=\"small\"\n              color=\"primary\"\n              :to=\"{ name: 'session-detail', params: { id: item.id }}\"\n            >\n              <v-icon>mdi-eye</v-icon>\n            </v-btn>\n          </template>\n        </v-data-table>\n        \n        <v-card-text v-else class=\"text-center py-8\">\n          <v-icon icon=\"mdi-calendar-blank\" size=\"64\" color=\"grey-lighten-1\" class=\"mb-4\"></v-icon>\n          <h3 class=\"text-h6 mb-2\">No sessions found</h3>\n          <p class=\"text-body-2 text-grey\">\n            {{ \n              sessionsStore.sessions.length === 0 \n                ? \"You haven't recorded any practice sessions yet\" \n                : \"No sessions match your search criteria\" \n            }}\n          </p>\n          <v-btn\n            v-if=\"sessionsStore.sessions.length === 0\"\n            color=\"primary\"\n            class=\"mt-4\"\n            :to=\"{ name: 'new-session' }\"\n          >\n            Start Practicing\n          </v-btn>\n        </v-card-text>\n      </template>\n    </v-card>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted, watch } from 'vue'\nimport { useRouter, useRoute } from 'vue-router'\nimport { useSessionsStore } from '@/stores/sessions.js'\nimport { useExercisesStore } from '@/stores/exercises.js'\nimport { useAppStore } from '@/stores/app.js'\nimport { format, parseISO } from 'date-fns'\n\nconst router = useRouter()\nconst route = useRoute()\nconst sessionsStore = useSessionsStore()\nconst exercisesStore = useExercisesStore()\nconst appStore = useAppStore()\n\n// Data\nconst search = ref('')\nconst exerciseFilter = ref(null)\nconst dateRange = ref([])\nconst dateMenu = ref(false)\n\n// Table headers\nconst headers = [\n  { title: 'Date', key: 'date' },\n  { title: 'Duration', key: 'duration' },\n  { title: 'Exercises', key: 'exercises' },\n  { title: 'Notes', key: 'notes' },\n  { title: 'Actions', key: 'actions', sortable: false, align: 'end' }\n]\n\n// Computed\nconst dateRangeText = computed(() => {\n  if (!dateRange.value || dateRange.value.length !== 2) return ''\n  \n  const [start, end] = dateRange.value\n  if (!start || !end) return ''\n  \n  return `${start} to ${end}`\n})\n\nconst exercisesForSelect = computed(() => {\n  return exercisesStore.exercises.map(exercise => ({\n    title: exercise.name,\n    value: exercise.id\n  }))\n})\n\nconst filteredSessions = computed(() => {\n  let result = sessionsStore.sessions\n  \n  // Search filter\n  if (search.value) {\n    const searchLower = search.value.toLowerCase()\n    result = result.filter(session => \n      (session.notes && session.notes.toLowerCase().includes(searchLower))\n    )\n  }\n  \n  // Exercise filter\n  if (exerciseFilter.value) {\n    result = result.filter(session => \n      session.exercises && session.exercises.some(ex => \n        ex.exerciseId === parseInt(exerciseFilter.value) ||\n        (ex.exercise && ex.exercise.id === parseInt(exerciseFilter.value))\n      )\n    )\n  }\n  \n  // Date range filter\n  if (dateRange.value && dateRange.value.length === 2 && dateRange.value[0] && dateRange.value[1]) {\n    const startDate = new Date(dateRange.value[0])\n    // Set to end of day for the end date\n    const endDate = new Date(dateRange.value[1])\n    endDate.setHours(23, 59, 59, 999)\n    \n    result = result.filter(session => {\n      const sessionDate = new Date(session.startTime)\n      return sessionDate >= startDate && sessionDate <= endDate\n    })\n  }\n  \n  // Sort by date, newest first\n  return [...result].sort((a, b) => new Date(b.startTime) - new Date(a.startTime))\n})\n\n// Methods\nfunction formatDate(dateString) {\n  return appStore.formatDate(dateString)\n}\n\nfunction formatDuration(startTime, endTime) {\n  return appStore.formatDuration(startTime, endTime)\n}\n\nfunction clearDateRange() {\n  dateRange.value = []\n}\n\n// Lifecycle\nonMounted(async () => {\n  // Load sessions if not already loaded\n  if (sessionsStore.sessions.length === 0) {\n    await sessionsStore.fetchSessions()\n  }\n  \n  // Load exercises if not already loaded\n  if (exercisesStore.exercises.length === 0) {\n    await exercisesStore.fetchExercises()\n  }\n})\n</script>\n"],"names":["useRouter","useRoute","sessionsStore","useSessionsStore","exercisesStore","useExercisesStore","appStore","useAppStore","search","ref","exerciseFilter","dateRange","dateMenu","headers","dateRangeText","computed","start","end","exercisesForSelect","exercise","filteredSessions","result","searchLower","session","ex","startDate","endDate","sessionDate","a","b","formatDate","dateString","formatDuration","startTime","endTime","clearDateRange","onMounted"],"mappings":"4bA2JeA,EAAU,EACXC,EAAS,EACvB,MAAMC,EAAgBC,EAAiB,EACjCC,EAAiBC,EAAkB,EACnCC,EAAWC,EAAY,EAGvBC,EAASC,EAAI,EAAE,EACfC,EAAiBD,EAAI,IAAI,EACzBE,EAAYF,EAAI,EAAE,EAClBG,EAAWH,EAAI,EAAK,EAGpBI,EAAU,CACd,CAAE,MAAO,OAAQ,IAAK,MAAQ,EAC9B,CAAE,MAAO,WAAY,IAAK,UAAY,EACtC,CAAE,MAAO,YAAa,IAAK,WAAa,EACxC,CAAE,MAAO,QAAS,IAAK,OAAS,EAChC,CAAE,MAAO,UAAW,IAAK,UAAW,SAAU,GAAO,MAAO,KAAM,CACpE,EAGMC,EAAgBC,EAAS,IAAM,CACnC,GAAI,CAACJ,EAAU,OAASA,EAAU,MAAM,SAAW,EAAG,MAAO,GAE7D,KAAM,CAACK,EAAOC,CAAG,EAAIN,EAAU,MAC/B,MAAI,CAACK,GAAS,CAACC,EAAY,GAEpB,GAAGD,CAAK,OAAOC,CAAG,EAC3B,CAAC,EAEKC,EAAqBH,EAAS,IAC3BX,EAAe,UAAU,IAAIe,IAAa,CAC/C,MAAOA,EAAS,KAChB,MAAOA,EAAS,EACpB,EAAI,CACH,EAEKC,EAAmBL,EAAS,IAAM,CACtC,IAAIM,EAASnB,EAAc,SAG3B,GAAIM,EAAO,MAAO,CAChB,MAAMc,EAAcd,EAAO,MAAM,YAAY,EAC7Ca,EAASA,EAAO,OAAOE,GACpBA,EAAQ,OAASA,EAAQ,MAAM,cAAc,SAASD,CAAW,CACpE,CACF,CAaA,GAVIZ,EAAe,QACjBW,EAASA,EAAO,OAAOE,GACrBA,EAAQ,WAAaA,EAAQ,UAAU,KAAKC,GAC1CA,EAAG,aAAe,SAASd,EAAe,KAAK,GAC9Cc,EAAG,UAAYA,EAAG,SAAS,KAAO,SAASd,EAAe,KAAK,CAClE,CACF,GAIEC,EAAU,OAASA,EAAU,MAAM,SAAW,GAAKA,EAAU,MAAM,CAAC,GAAKA,EAAU,MAAM,CAAC,EAAG,CAC/F,MAAMc,EAAY,IAAI,KAAKd,EAAU,MAAM,CAAC,CAAC,EAEvCe,EAAU,IAAI,KAAKf,EAAU,MAAM,CAAC,CAAC,EAC3Ce,EAAQ,SAAS,GAAI,GAAI,GAAI,GAAG,EAEhCL,EAASA,EAAO,OAAOE,GAAW,CAChC,MAAMI,EAAc,IAAI,KAAKJ,EAAQ,SAAS,EAC9C,OAAOI,GAAeF,GAAaE,GAAeD,CACxD,CAAK,CACH,CAGA,MAAO,CAAC,GAAGL,CAAM,EAAE,KAAK,CAACO,EAAGC,IAAM,IAAI,KAAKA,EAAE,SAAS,EAAI,IAAI,KAAKD,EAAE,SAAS,CAAC,CACjF,CAAC,EAGD,SAASE,EAAWC,EAAY,CAC9B,OAAOzB,EAAS,WAAWyB,CAAU,CACvC,CAEA,SAASC,EAAeC,EAAWC,EAAS,CAC1C,OAAO5B,EAAS,eAAe2B,EAAWC,CAAO,CACnD,CAEA,SAASC,GAAiB,CACxBxB,EAAU,MAAQ,CAAC,CACrB,CAGA,OAAAyB,EAAU,SAAY,CAEhBlC,EAAc,SAAS,SAAW,GACpC,MAAMA,EAAc,cAAc,EAIhCE,EAAe,UAAU,SAAW,GACtC,MAAMA,EAAe,eAAe,CAExC,CAAC"}