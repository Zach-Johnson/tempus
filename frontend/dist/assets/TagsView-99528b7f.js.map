{"version":3,"file":"TagsView-99528b7f.js","sources":["../../src/views/tags/TagsView.vue"],"sourcesContent":["<template>\n  <div>\n    <v-row class=\"mb-4\">\n      <v-col cols=\"12\" sm=\"8\">\n        <h1 class=\"text-h3\">Tags</h1>\n        <p class=\"text-body-1\">Manage tags for categorizing exercises</p>\n      </v-col>\n      <v-col cols=\"12\" sm=\"4\" class=\"d-flex justify-end align-center\">\n        <v-btn\n          color=\"primary\"\n          prepend-icon=\"mdi-plus\"\n          @click=\"openCreateDialog\"\n        >\n          New Tag\n        </v-btn>\n      </v-col>\n    </v-row>\n\n    <!-- Search and filter -->\n    <v-card class=\"mb-6\">\n      <v-card-text>\n        <v-row>\n          <v-col cols=\"12\" sm=\"6\" md=\"4\">\n            <v-text-field\n              v-model=\"search\"\n              label=\"Search tags\"\n              variant=\"outlined\"\n              density=\"compact\"\n              prepend-inner-icon=\"mdi-magnify\"\n              hide-details\n              clearable\n            ></v-text-field>\n          </v-col>\n          <v-col cols=\"12\" sm=\"6\" md=\"4\">\n            <v-select\n              v-model=\"categoryFilter\"\n              :items=\"categoriesForSelect\"\n              label=\"Filter by category\"\n              variant=\"outlined\"\n              density=\"compact\"\n              hide-details\n              clearable\n            ></v-select>\n          </v-col>\n        </v-row>\n      </v-card-text>\n    </v-card>\n\n    <!-- Tags list -->\n    <v-card>\n      <v-card-text v-if=\"tagsStore.loading\">\n        <div class=\"d-flex justify-center align-center py-4\">\n          <v-progress-circular indeterminate color=\"primary\"></v-progress-circular>\n        </div>\n      </v-card-text>\n      \n      <template v-else>\n        <v-data-table\n          v-if=\"filteredTags.length > 0\"\n          :headers=\"headers\"\n          :items=\"filteredTags\"\n          :items-per-page=\"10\"\n          class=\"elevation-1            \"\n        >\n        <template #item.createdAt=\"{ item }\">\n            {{ appStore.formatDate(item.createdAt) }}\n        </template>\n          <template v-slot:item.categories=\"{ item }\">\n            <v-chip-group>\n              <v-chip\n                v-for=\"categoryId in item.categoryIds\"\n                :key=\"categoryId\"\n                size=\"small\"\n                color=\"primary\"\n                variant=\"outlined\"\n                class=\"mr-1\"\n              >\n                {{ getCategoryName(categoryId) }}\n              </v-chip>\n            </v-chip-group>\n          </template>\n          \n          <template v-slot:item.actions=\"{ item }\">\n            <v-btn\n              icon\n              variant=\"text\"\n              size=\"small\"\n              color=\"primary\"\n              @click=\"openEditDialog(item)\"\n            >\n              <v-icon>mdi-pencil</v-icon>\n            </v-btn>\n            <v-btn\n              icon\n              variant=\"text\"\n              size=\"small\"\n              color=\"error\"\n              @click=\"confirmDelete(item)\"\n            >\n              <v-icon>mdi-delete</v-icon>\n            </v-btn>\n          </template>\n        </v-data-table>\n        \n        <v-card-text v-else class=\"text-center py-8\">\n          <v-icon icon=\"mdi-tag-off\" size=\"64\" color=\"grey-lighten-1\" class=\"mb-4\"></v-icon>\n          <h3 class=\"text-h6 mb-2\">No tags found</h3>\n          <p class=\"text-body-2 text-grey\">\n            {{ \n              tagsStore.tags.length === 0 \n                ? \"You haven't created any tags yet\" \n                : \"No tags match your search criteria\" \n            }}\n          </p>\n        </v-card-text>\n      </template>\n    </v-card>\n\n    <!-- Create/Edit Dialog -->\n    <tag-form-dialog\n      v-model=\"dialogVisible\"\n      :tag=\"selectedTag\"\n      :is-edit=\"isEdit\"\n      @save=\"saveTag\"\n    />\n\n    <!-- Delete Confirmation Dialog -->\n    <v-dialog v-model=\"deleteDialog\" max-width=\"500\">\n      <v-card>\n        <v-card-title class=\"text-h5\">Delete Tag</v-card-title>\n        <v-card-text>\n          Are you sure you want to delete the tag <strong>{{ selectedTag?.name }}</strong>? \n          This will remove it from all exercises. This action cannot be undone.\n        </v-card-text>\n        <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-btn color=\"grey-darken-1\" variant=\"text\" @click=\"deleteDialog = false\">Cancel</v-btn>\n          <v-btn \n            color=\"error\" \n            variant=\"flat\" \n            @click=\"deleteTag\" \n            :loading=\"deleteLoading\"\n          >\n            Delete\n          </v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted } from 'vue'\nimport { useTagsStore } from '@/stores/tags.js'\nimport { useCategoriesStore } from '@/stores/categories.js'\nimport { useAppStore } from '@/stores/app.js'\nimport TagFormDialog from '@/components/tags/TagFormDialog.vue'\n\nconst tagsStore = useTagsStore()\nconst categoriesStore = useCategoriesStore()\nconst appStore = useAppStore()\n\n// Data\nconst search = ref('')\nconst categoryFilter = ref(null)\nconst dialogVisible = ref(false)\nconst isEdit = ref(false)\nconst selectedTag = ref(null)\nconst deleteDialog = ref(false)\nconst deleteLoading = ref(false)\n\n// Table headers\nconst headers = [\n  { title: 'Name', key: 'name' },\n  { title: 'Categories', key: 'categories' },\n  { title: 'Created', key: 'createdAt' },\n  { title: 'Actions', key: 'actions', sortable: false }\n]\n\n// Computed\nconst filteredTags = computed(() => {\n  let result = tagsStore.tags\n  \n  // Search filter\n  if (search.value) {\n    const searchLower = search.value.toLowerCase()\n    result = result.filter(tag => \n      tag.name.toLowerCase().includes(searchLower)\n    )\n  }\n  \n  // Category filter\n  if (categoryFilter.value) {\n    result = result.filter(tag => \n      tag.categoryIds && tag.categoryIds.includes(parseInt(categoryFilter.value))\n    )\n  }\n  \n  return result\n})\n\nconst categoriesForSelect = computed(() => {\n  return categoriesStore.categories.map(category => ({\n    title: category.name,\n    value: category.id\n  }))\n})\n\n// Methods\nfunction getCategoryName(categoryId) {\n  const category = categoriesStore.categoryById(categoryId)\n  return category ? category.name : 'Unknown'\n}\n\nfunction openCreateDialog() {\n  selectedTag.value = {\n    name: '',\n    categoryIds: []\n  }\n  isEdit.value = false\n  dialogVisible.value = true\n}\n\nfunction openEditDialog(tag) {\n  selectedTag.value = { ...tag }\n  isEdit.value = true\n  dialogVisible.value = true\n}\n\nasync function saveTag(tagData) {\n  try {\n    if (isEdit.value) {\n      const id = selectedTag.value.id\n      await tagsStore.updateTag(id, tagData, 'name,categoryIds')\n      appStore.showSuccessMessage(`Tag \"${tagData.name}\" updated successfully`)\n    } else {\n      await tagsStore.createTag(tagData)\n      appStore.showSuccessMessage(`Tag \"${tagData.name}\" created successfully`)\n    }\n    dialogVisible.value = false\n  } catch (error) {\n    appStore.showErrorMessage(`Error saving tag: ${error.message}`)\n  }\n}\n\nfunction confirmDelete(tag) {\n  selectedTag.value = tag\n  deleteDialog.value = true\n}\n\nasync function deleteTag() {\n  deleteLoading.value = true\n  try {\n    await tagsStore.deleteTag(selectedTag.value.id)\n    appStore.showSuccessMessage(`Tag \"${selectedTag.value.name}\" deleted successfully`)\n    deleteDialog.value = false\n  } catch (error) {\n    appStore.showErrorMessage(`Error deleting tag: ${error.message}`)\n  } finally {\n    deleteLoading.value = false\n  }\n}\n\n// Lifecycle\nonMounted(async () => {\n  if (tagsStore.tags.length === 0) {\n    await tagsStore.fetchTags()\n  }\n  \n  if (categoriesStore.categories.length === 0) {\n    await categoriesStore.fetchCategories()\n  }\n})\n</script>\n"],"names":["tagsStore","useTagsStore","categoriesStore","useCategoriesStore","appStore","useAppStore","search","ref","categoryFilter","dialogVisible","isEdit","selectedTag","deleteDialog","deleteLoading","headers","filteredTags","computed","result","searchLower","tag","categoriesForSelect","category","getCategoryName","categoryId","openCreateDialog","openEditDialog","saveTag","tagData","id","error","confirmDelete","deleteTag","onMounted"],"mappings":"icA8JA,MAAMA,EAAYC,GAAa,EACzBC,EAAkBC,GAAmB,EACrCC,EAAWC,GAAY,EAGvBC,EAASC,EAAI,EAAE,EACfC,EAAiBD,EAAI,IAAI,EACzBE,EAAgBF,EAAI,EAAK,EACzBG,EAASH,EAAI,EAAK,EAClBI,EAAcJ,EAAI,IAAI,EACtBK,EAAeL,EAAI,EAAK,EACxBM,EAAgBN,EAAI,EAAK,EAGzBO,EAAU,CACd,CAAE,MAAO,OAAQ,IAAK,MAAQ,EAC9B,CAAE,MAAO,aAAc,IAAK,YAAc,EAC1C,CAAE,MAAO,UAAW,IAAK,WAAa,EACtC,CAAE,MAAO,UAAW,IAAK,UAAW,SAAU,EAAM,CACtD,EAGMC,EAAeC,EAAS,IAAM,CAClC,IAAIC,EAASjB,EAAU,KAGvB,GAAIM,EAAO,MAAO,CAChB,MAAMY,EAAcZ,EAAO,MAAM,YAAY,EAC7CW,EAASA,EAAO,OAAOE,GACrBA,EAAI,KAAK,cAAc,SAASD,CAAW,CAC7C,CACF,CAGA,OAAIV,EAAe,QACjBS,EAASA,EAAO,OAAOE,GACrBA,EAAI,aAAeA,EAAI,YAAY,SAAS,SAASX,EAAe,KAAK,CAAC,CAC5E,GAGKS,CACT,CAAC,EAEKG,EAAsBJ,EAAS,IAC5Bd,EAAgB,WAAW,IAAImB,IAAa,CACjD,MAAOA,EAAS,KAChB,MAAOA,EAAS,EACpB,EAAI,CACH,EAGD,SAASC,EAAgBC,EAAY,CACnC,MAAMF,EAAWnB,EAAgB,aAAaqB,CAAU,EACxD,OAAOF,EAAWA,EAAS,KAAO,SACpC,CAEA,SAASG,GAAmB,CAC1Bb,EAAY,MAAQ,CAClB,KAAM,GACN,YAAa,CAAC,CAChB,EACAD,EAAO,MAAQ,GACfD,EAAc,MAAQ,EACxB,CAEA,SAASgB,EAAeN,EAAK,CAC3BR,EAAY,MAAQ,CAAE,GAAGQ,CAAI,EAC7BT,EAAO,MAAQ,GACfD,EAAc,MAAQ,EACxB,CAEA,eAAeiB,EAAQC,EAAS,CAC9B,GAAI,CACF,GAAIjB,EAAO,MAAO,CAChB,MAAMkB,EAAKjB,EAAY,MAAM,GAC7B,MAAMX,EAAU,UAAU4B,EAAID,EAAS,kBAAkB,EACzDvB,EAAS,mBAAmB,QAAQuB,EAAQ,IAAI,wBAAwB,CAC9E,MACM,MAAM3B,EAAU,UAAU2B,CAAO,EACjCvB,EAAS,mBAAmB,QAAQuB,EAAQ,IAAI,wBAAwB,EAE1ElB,EAAc,MAAQ,EACvB,OAAQoB,EAAO,CACdzB,EAAS,iBAAiB,qBAAqByB,EAAM,OAAO,EAAE,CAChE,CACF,CAEA,SAASC,EAAcX,EAAK,CAC1BR,EAAY,MAAQQ,EACpBP,EAAa,MAAQ,EACvB,CAEA,eAAemB,GAAY,CACzBlB,EAAc,MAAQ,GACtB,GAAI,CACF,MAAMb,EAAU,UAAUW,EAAY,MAAM,EAAE,EAC9CP,EAAS,mBAAmB,QAAQO,EAAY,MAAM,IAAI,wBAAwB,EAClFC,EAAa,MAAQ,EACtB,OAAQiB,EAAO,CACdzB,EAAS,iBAAiB,uBAAuByB,EAAM,OAAO,EAAE,CACpE,QAAY,CACRhB,EAAc,MAAQ,EACxB,CACF,CAGA,OAAAmB,GAAU,SAAY,CAChBhC,EAAU,KAAK,SAAW,GAC5B,MAAMA,EAAU,UAAU,EAGxBE,EAAgB,WAAW,SAAW,GACxC,MAAMA,EAAgB,gBAAgB,CAE1C,CAAC"}